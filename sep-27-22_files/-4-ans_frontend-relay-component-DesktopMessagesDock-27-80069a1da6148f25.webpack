(window.ansFrontendRelayWebpackJsonpFunction=window.ansFrontendRelayWebpackJsonpFunction||[]).push([["component-DesktopMessagesDock"],{"+ISc":function(e,n,a){"use strict";a.r(n);var t,l,r=a("lwsE"),i=a.n(r),s=a("W8MJ"),o=a.n(s),u=a("PJYZ"),d=a.n(u),c=a("7W2i"),m=a.n(c),g=a("a1gu"),f=a.n(g),p=a("Nsbk"),h=a.n(p),y=a("vOnD"),b=a("vfSt"),v=a("Pam5"),k=a("jufJ"),S=a("/bbo"),F=a("gujl"),E=a("td6z"),O=a("ga2z"),w=a("HC+x"),T=a("RA+f"),C=a("KdZM"),K=a("9AGM"),_=a("VyO/"),L=a("UyMh"),j=a("/Zbp"),x=a("q1tI"),M=a.n(x),R=a("4Xda"),I=a("SW63"),D=a("faux"),N=a("zLpq"),U=a("xGwX"),B=a("OMLc"),V=a("zUwh"),A=a("GxN1"),P=a("hXLn"),H=a("R+um"),q=a("r+vq");function z(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,t=h()(e);if(n){var l=h()(this).constructor;a=Reflect.construct(t,arguments,l)}else a=t.apply(this,arguments);return f()(this,a)}}var W=function(e){m()(a,e);var n=z(a);function a(){return i()(this,a),n.apply(this,arguments)}return o()(a,[{key:"renderDefaultHeader",value:function(){var e=this.props.viewer;return M.a.createElement(M.a.Fragment,null,M.a.createElement(P.a,{fragmentOrQuery:a.fragments.viewer,initialData:e},(null===e||void 0===e?void 0:e.inboxCount)>0?M.a.createElement(U.b,{count:e.inboxCount,mr:"tiny"}):M.a.createElement(M.a.Fragment,null)),M.a.createElement(T.s,{flex:1,fontSize:"regular",medium:!0},M.a.createElement(k.Translate,null,"Messages")),M.a.createElement(N.a,{size:"small",tooltipText:M.a.createElement(k.Translate,null,"New message"),icon:M.a.createElement(B.b,{name:"NewMessage"}),href:"/messages/new",onClick:function(e){e.stopPropagation()}}),M.a.createElement(N.a,{size:"small",icon:M.a.createElement(B.b,{name:this.props.isExpanded?"ChevronDown":"ChevronUp"})}))}},{key:"render",value:function(){var e=this.props.thread;return e?M.a.createElement(P.a,{fragmentOrQuery:a.fragments.thread,initialData:e,variables:{id:e.threadId}},M.a.createElement(M.a.Fragment,null,this.props.isExpanded&&M.a.createElement(N.a,{size:"small",icon:M.a.createElement(B.b,{name:"ChevronLeft"}),onClick:this.props.onBackClick,tooltipText:M.a.createElement(k.Translate,null,"Back to message list")}),M.a.createElement(T.j,{alignItems:"center",flex:1,minWidth:0},1===e.otherUsers.length&&M.a.createElement(T.q,{flexGrow:0,flexShrink:0,display:"inline-flex"},M.a.createElement(q.a,{user:e.otherUsers[0],linked:!1,includeHovercard:!1,size:18}),e.isUnreadForViewer?M.a.createElement(T.a,{top:-2,right:-2,display:"inline-flex"},M.a.createElement(A.b,{ml:"tiny",hasBorder:!0})):M.a.createElement(M.a.Fragment,null)),M.a.createElement(T.s,{fontSize:"regular",pl:"small",medium:!0,overflow:"hidden",whiteSpace:"nowrap",flex:1,minWidth:0,underlineLinks:!1},M.a.createElement(k.InlineCommaList,null,e.otherUsers.map((function(e){return M.a.createElement(H.b,{user:e,key:e.uid})}))))),this.props.isExpanded&&M.a.createElement(N.a,{size:"small",icon:M.a.createElement(B.b,{name:"Expand"}),onClick:this.props.onExpand,tooltipText:M.a.createElement(k.Translate,null,"Open in message inbox"),tooltipPlacement:"top"}),M.a.createElement(N.a,{size:"small",icon:M.a.createElement(B.b,{name:this.props.isExpanded?"ChevronDown":"ChevronUp"})}))):this.renderDefaultHeader()}}]),a}(M.a.Component);W.fragments={thread:void 0!==t?t:t=a("UiPH"),viewer:void 0!==l?l:l=a("LWLz")},W.displayName="DesktopMessagesDockHeader";var Q,G=function(){return M.a.createElement(T.j,{height:38,alignItems:"center",px:"medium"},M.a.createElement(V.g,{bgColor:"raised"},M.a.createElement(V.j,{width:80,fontSize:"regular",maskColor:"raised"})))},J=Object(_.b)(W),Y=a("uV3B"),X=a("vcKx"),Z=a("XNsX"),$=a("ujEb"),ee=a("LsXc");function ne(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,t=h()(e);if(n){var l=h()(this).constructor;a=Reflect.construct(t,arguments,l)}else a=t.apply(this,arguments);return f()(this,a)}}var ae=Object(y["default"])(T.i).withConfig({displayName:"DesktopMessagesDock___StyledFixed",componentId:"sc-1bh1698-0"})(["transform:translateY( "," );"],(function(e){return e._css})),te=Object(y["default"])(T.a).withConfig({displayName:"DesktopMessagesDock___StyledAbsolute",componentId:"sc-1bh1698-1"})(["&:hover > div{opacity:0.6 !important;}"]),le=function(e){m()(a,e);var n=ne(a);function a(e){var t;return i()(this,a),(t=n.call(this,e)).scrollRef=void 0,t.scrollingElementRef=void 0,t.containerRef=void 0,t.scrollHeight=void 0,t.dragHandleHeight=void 0,t.state={isExpanded:"true"===Object(K.a)(I.a.dock_expand_state),bodyHeight:0,hasMounted:!1,currentThreadId:undefined,isDragging:!1,dockHeight:parseInt(Object(K.a)(I.a.dock_height)||"60")},t.scrollRef=M.a.createRef(),t.scrollingElementRef=M.a.createRef(),t.containerRef=M.a.createRef(),t.scrollHeight=0,t.dragHandleHeight=24,t.handleNavbarClick=t.handleNavbarClick.bind(d()(t)),t.handleWindowResize=t.handleWindowResize.bind(d()(t)),t.onThreadClick=t.onThreadClick.bind(d()(t)),t.handleDragHandleMouseDown=t.handleDragHandleMouseDown.bind(d()(t)),t.handleDrag=t.handleDrag.bind(d()(t)),t.handleDragHandleMouseCancel=t.handleDragHandleMouseCancel.bind(d()(t)),t.renderThreadError=t.renderThreadError.bind(d()(t)),t}return o()(a,[{key:"handleNavbarClick",value:function(){var e=!this.state.isExpanded;Object(K.f)(I.a.dock_expand_state,String(e),{expires:Object(j.k)(1*j.a)}),this.setState((function(n){return Object.assign({},n,{isExpanded:e})}))}},{key:"handleWindowResize",value:function(){var e,n;null!==(e=this.scrollRef)&&void 0!==e&&e.current&&this.setState({bodyHeight:null===(n=this.scrollRef.current)||void 0===n?void 0:n.clientHeight})}},{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.setState({hasMounted:!0})}),500),window.addEventListener("resize",this.handleWindowResize),this.handleWindowResize()}},{key:"onThreadClick",value:function(e){this.setState({currentThreadId:e})}},{key:"renderThreadList",value:function(){var e=this.props.queryRoot.viewer;return e?M.a.createElement(M.a.Suspense,{fallback:null},M.a.createElement(ee.a,{viewer:e,onItemClick:this.onThreadClick})):M.a.createElement(E.c,{fillParent:!0})}},{key:"handleDragHandleMouseDown",value:function(){this.state.isDragging||(this.setState({isDragging:!0}),window.addEventListener("mousemove",this.handleDrag),window.addEventListener("mouseup",this.handleDragHandleMouseCancel,{once:!0}))}},{key:"handleDragHandleMouseCancel",value:function(){this.state.isDragging&&(this.setState({isDragging:!1}),window.removeEventListener("mousemove",this.handleDrag),this.handleWindowResize(),Object(K.f)(I.a.dock_height,String(this.state.dockHeight)))}},{key:"handleDrag",value:function(e){e.preventDefault();var n=window.innerHeight;this.setState({dockHeight:Math.max(Math.min(80,(n-e.y-this.dragHandleHeight/2)/n*100),40)})}},{key:"renderThreadError",value:function(){return M.a.createElement(F.a,{type:"error",bg:"transparent",title:M.a.createElement(k.Translate,null,"Something went wrong"),body:M.a.createElement(k.Translate,null,"Wait a moment and try again."),buttonComponent:M.a.createElement(S.a,{text:M.a.createElement(k.Translate,null,"Refresh page"),size:"small",onClick:function(){window.location.reload()}})})}},{key:"renderThread",value:function(){var e=this;return this.state.currentThreadId?M.a.createElement(v.a,{query:a.queries.thread,variables:{threadId:this.state.currentThreadId},loading:Object(Z.a)(!0),error:this.renderThreadError},(function(n){var a=n.thread;return a?(a.isUnreadForViewer&&e.state.currentThreadId&&Object(Y.a)(e.state.currentThreadId),M.a.createElement($.a,{thread:a,minHeight:"1%"})):e.renderThreadError()})):M.a.createElement(M.a.Fragment,null)}},{key:"render",value:function(){var e=this;return M.a.createElement(X.a.Provider,{value:{container:"dock"}},M.a.createElement(C.a.Consumer,null,(function(n){return M.a.createElement(R.b.Consumer,null,(function(t){return M.a.createElement(y.ThemeConsumer,null,(function(l){return M.a.createElement(ae,{bottom:n,zIndex:l.zIndices.search_overlay-1,height:"".concat(e.state.dockHeight,"vh"),right:8,bg:"raised",display:"flex",flexDirection:"column",width:e.state.isExpanded?D.b:240,boxShadow:"0 0 0 1px ".concat(t.isDarkModeOn?"rgba(255, 255, 255, .1)":"rgba(0, 0, 0, .1)",", ").concat(l.shadows.medium).concat(e.state.isExpanded?", rgb(0 0 0 / 20%) 0px 0px 30px":""),borderTopLeftRadius:"small",borderTopRightRadius:"small",innerRef:e.containerRef,transitionProperty:e.state.hasMounted?"transform":undefined,transitionDuration:e.state.hasMounted?"120ms":"0ms",transitionTimingFunction:T.w,_css:e.state.isExpanded?"0":e.state.bodyHeight+"px"},M.a.createElement(O.a,{wrapperRef:e.containerRef},(function(n){var l=n.isHovered;return M.a.createElement(M.a.Fragment,null,e.state.isExpanded&&M.a.createElement(te,{bottom:"calc(100%)",fullX:!0,height:e.dragHandleHeight,display:"flex",alignItems:"center",justifyContent:"center",onMouseDown:e.handleDragHandleMouseDown,cursor:"ns-resize",opacity:l||e.state.isDragging?1:0,transition:"opacity",transitionDelay:l?"200ms":undefined},M.a.createElement(T.e,{width:36,height:4,borderRadius:"pill",bg:t.isDarkModeOn?"rgba(255, 255, 255, 0.5)":"gray_dark",opacity:e.state.isDragging?.6:.4})),M.a.createElement(T.f,{p:"tiny",pl:e.state.currentThreadId&&e.state.isExpanded?"tiny":"small",alignItems:"center",display:"flex",onClick:e.handleNavbarClick,underlineLinks:!1,underlineHover:!1,borderRadius:"inherit",userSelect:"none",borderBottom:e.state.isExpanded,height:38,hover:{bg:"darken"}},M.a.createElement(v.a,{query:a.queries.header,variables:{threadId:e.state.currentThreadId||0,includeThread:e.state.currentThreadId!==undefined},loading:M.a.createElement(G,null),error:function(){return M.a.createElement(G,null)}},(function(n){var a=n.thread,t=n.viewer;return M.a.createElement(J,{thread:a||null,viewer:t,isExpanded:e.state.isExpanded,onBackClick:function(n){n.stopPropagation(),e.setState({currentThreadId:undefined})},onExpand:function(n){n.stopPropagation(),Object(L.c)("/messages/thread/"+e.state.currentThreadId)}})}))),M.a.createElement(T.j,{flexDirection:"column",flex:1,innerRef:e.scrollRef,height:0},M.a.createElement(w.a,{flex:1,useShadows:!0,height:0,wrapperProps:{display:"flex",flexDirection:"column",flex:1,height:0},innerRef:e.scrollingElementRef},!e.state.currentThreadId&&e.renderThreadList(),e.state.currentThreadId&&e.renderThread())))})))}))}))})))}}]),a}(M.a.Component);le.fragments={queryRoot:void 0!==Q?Q:Q=a("2QLN")},le.queries={thread:new b["default"]((function(){return a.e("query-DesktopMessagesDockThreadQuery").then(a.bind(null,"oq56"))}),"DesktopMessagesDockThreadQuery"),header:new b["default"]((function(){return a.e("query-DesktopMessagesDockHeaderQuery").then(a.bind(null,"MM2Q"))}),"DesktopMessagesDockHeaderQuery")},le.displayName="DesktopMessagesDock";n["default"]=Object(_.b)(le)},"+pxc":function(e,n,a){"use strict";a.d(n,"c",(function(){return s})),a.d(n,"b",(function(){return u})),a.d(n,"a",(function(){return g}));var t=a("SKAY"),l=a("nwxp"),r=a("44Ds"),i=a.n(r),s=i()((function(){return!!Object(l.c)()||!!(navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&-1===navigator.userAgent.indexOf("CriOS")&&-1===navigator.userAgent.indexOf("FxiOS"))})),o=i()((function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1})),u=i()((function(){if(Object(l.a)())return!0;var e=window.chrome,n=window.navigator,a=n.vendor,t="undefined"!==typeof window.opr,r=n.userAgent.indexOf("Edg")>-1;return!(!e||"Google Inc."!==a||t||r)})),d=i()((function(){return window.navigator.userAgent.indexOf("Edge")>-1})),c=i()((function(){return navigator.userAgent.indexOf("AppleWebKit")>-1})),m=i()((function(){var e=window.navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return e?parseFloat("".concat(e[1],".").concat(e[2])):0})),g=i()((function(){return{isMobile:Object(l.e)(),isIPad:l.q,isIOSApp:Object(l.c)(),isAndroidApp:Object(l.a)(),isNativeApp:Object(l.g)(),isIOS:l.p,isAndroid:l.n,isIOSMobileWeb:Object(l.f)()&&l.p,buildNumber:Object(t.getBuildNumber)()||0,debug:Object(t.getDebugToolsEnabled)(),isMSEdge:d(),isGecko:o(),isWebkit:c(),isFirefox:o(),isSafari:s(),isChrome:u(),webkitVersion:0,isUIWebView:Object(l.k)(),osVersion:m()}}))},"/zLA":function(e,n,a){"use strict";a.r(n);var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ThreadReplyComposer_thread",selections:[{alias:null,args:null,kind:"ScalarField",name:"threadId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isFromModeration",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"otherUsers",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"uid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewerCanMessage",storageKey:null},{args:null,kind:"FragmentSpread",name:"UserName_user"}],storageKey:null},{alias:null,args:null,concreteType:"Network",kind:"LinkedField",name:"network",plural:!1,selections:[{alias:"helpCenterLink",args:[{kind:"Literal",name:"name",value:"help_center"}],kind:"ScalarField",name:"linkUrl",storageKey:'linkUrl(name:"help_center")'}],storageKey:null}],type:"Thread",abstractKey:null,hash:"28d28d2c0ff900f19c523d05d36a06e4"};n["default"]=t},"2QLN":function(e,n,a){"use strict";a.r(n);var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DesktopMessagesDock_queryRoot",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"MessageThreadList_viewer"}],storageKey:null}],type:"QueryRoot",abstractKey:null,hash:"e65555b144bc8af02305ac023abb5ebf"};n["default"]=t},"5bR8":function(e,n,a){"use strict";a.r(n);var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"HideThread_thread",selections:[{alias:null,args:null,kind:"ScalarField",name:"threadId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"otherUsers",plural:!0,selections:[{args:null,kind:"FragmentSpread",name:"UserName_user"}],storageKey:null}],type:"Thread",abstractKey:null,hash:"9589e1c9e82a67478d3644b947998af9"};n["default"]=t},"73KL":function(e,n,a){"use strict";a.r(n);var t={kind:"InlineDataFragment",name:"nativeBadgeHelpers_updateCounts_viewer",hash:"bb112de7055c52753ffd2e8c1475a984"};n["default"]=t},"7yJA":function(e,n,a){"use strict";var t,l,r=a("pa+i"),i=a("jufJ"),s=a("6pr2"),o=a("XRWA"),u=a("VyO/"),d=a("q1tI"),c=a.n(d),m=a("lwsE"),g=a.n(m),f=a("W8MJ"),p=a.n(f),h=a("7W2i"),y=a.n(h),b=a("a1gu"),v=a.n(b),k=a("Nsbk"),S=a.n(k),F=a("R+um"),E=a("/nKJ"),O=a("yju1"),w=a("nwxp"),T=a("UyMh");function C(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,t=S()(e);if(n){var l=S()(this).constructor;a=Reflect.construct(t,arguments,l)}else a=t.apply(this,arguments);return v()(this,a)}}var K=function(e){y()(a,e);var n=C(a);function a(){return g()(this,a),n.apply(this,arguments)}return p()(a,null,[{key:"getOverflowItem",value:function(e){var n=e.threadId,t=e.otherUsers,l=Object(i.plaintextTranslate)(c.a.createElement(c.a.Fragment,null,"Hide Messages from ",c.a.createElement(F.b,{user:t[0]}))),r=Object(i.plaintextTranslate)(c.a.createElement(c.a.Fragment,null,"Messages will be hidden until either you or"," ",c.a.createElement(F.b,{user:t[0],format:"short"})," sends a new message."));return{label:Object(i.plaintextTranslate)("Mute Conversation"),onSelected:function(){Object(E.b)({title:l,message:r,submitButtonTitle:Object(i.plaintextTranslate)("Hide"),onAccept:function(){return Object(u.c)({mutation:a.mutations.hideThread,variables:{threadId:n}}).then((function(){Object(w.g)()?(Object(O.a)("broadcastAllWebViews",{messageName:"markPageAsDirty",data:{url:"/messages"}}),Object(O.a)("dismiss")):Object(T.c)("/messages","push")}))}})}}}}]),a}(c.a.Component);K.fragments={thread:void 0!==t?t:t=a("5bR8")},K.mutations={hideThread:void 0!==l?l:l=a("YcUQ")},K.displayName="HideThread";var _,L,j=Object(u.b)(K,!0);function x(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,t=S()(e);if(n){var l=S()(this).constructor;a=Reflect.construct(t,arguments,l)}else a=t.apply(this,arguments);return v()(this,a)}}var M=function(e){y()(a,e);var n=x(a);function a(){return g()(this,a),n.apply(this,arguments)}return p()(a,null,[{key:"getOverflowItem",value:function(e){var n=e.id,t=e.threadId,l=e.otherUsers,r=e.viewer,s=Object(i.plaintextTranslate)("Mark as Unread"),o=Object(i.plaintextTranslate)(c.a.createElement(c.a.Fragment,null,"Are you sure you would like to mark your conversation with"," ",c.a.createElement(F.b,{user:l[0],format:"short"})," as unread?"));return{label:Object(i.plaintextTranslate)("Mark as Unread"),onSelected:function(){Object(E.b)({title:s,message:o,submitButtonTitle:Object(i.plaintextTranslate)("Mark Unread"),onAccept:function(){return Object(u.c)({mutation:a.mutations.threadMarkUnread,variables:{threadId:t},optimisticResponse:{threadMarkUnread:{thread:{id:n,isUnreadForViewer:!0,viewer:{id:r.id,inboxCount:r.inboxCount+1,profileNavBadgeCount:r.profileNavBadgeCount+1}}}}}).then((function(){Object(w.g)()?(Object(O.a)("broadcastAllWebViews",{messageName:"markPageAsDirty",data:{url:"/messages"}}),Object(O.a)("dismiss")):Object(T.c)("/messages","push")}))}})}}}}]),a}(c.a.Component);M.fragments={thread:void 0!==_?_:_=a("doju")},M.mutations={threadMarkUnread:void 0!==L?L:L=a("kBEN")},M.displayName="ThreadMarkUnread";var R,I=Object(u.b)(M,!0),D=function(e){var n=e.thread,a=e.variant,t=e.isInModal,l=e.disableFocus;return c.a.createElement(o.a,null,(function(e){var o=[j.getOverflowItem(n),I.getOverflowItem(n),r.a.getOverflowItem(n,e)];return c.a.createElement(s.a,{title:Object(i.plaintextTranslate)("Message"),items:o,tooltipText:Object(i.plaintextTranslate)("More"),size:"small",buttonProps:{type:"flat",variant:a},isInModal:t,onClick:function(){return null===l||void 0===l?void 0:l()}})}))};D.displayName="ThreadOverflowMenu",D.displayName="ThreadOverflowMenu",D.fragments={thread:void 0!==R?R:R=a("EUeo")};n.a=Object(u.b)(D)},"8qyK":function(e,n,a){"use strict";a.r(n);var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"Message_message",selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"author",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"uid",storageKey:null},{args:null,kind:"FragmentSpread",name:"UserPhoto_user"}],storageKey:null},{alias:null,args:null,concreteType:"QtextDocument",kind:"LinkedField",name:"contentQtextDocument",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"legacyJson",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"time",storageKey:null}],type:"Message",abstractKey:null,hash:"310b2b95e7444a4a3032a02c6fe85237"};n["default"]=t},EUeo:function(e,n,a){"use strict";a.r(n);var t=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ThreadOverflowMenu_thread",selections:[{alias:null,args:null,kind:"ScalarField",name:"threadId",storageKey:null},e,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"otherUsers",plural:!0,selections:[{args:null,kind:"FragmentSpread",name:"UserName_user"}],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"inboxCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"profileNavBadgeCount",storageKey:null}],storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"reportableId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"canViewerReport",storageKey:null}],type:"Reportable",abstractKey:"__isReportable"}],type:"Thread",abstractKey:null}}();t.hash="0379824048376fb626098595bd2b104b",n["default"]=t},EreF:function(e,n,a){"use strict";a("tuWV");var t=a("/G9y"),l=a("q1tI"),r=a.n(l),i=Object(t.a)((function(){return a.e("component-QTextEditor").then(a.bind(null,"a+Nv"))}),{fallback:function(){return null}}),s=r.a.forwardRef((function(e,n){return r.a.createElement(i,Object.assign({},e,{forwardedRef:n}))}));s.displayName="QTextEditor",n.a=s},G14d:function(e,n,a){"use strict";a.r(n);var t=function(){var e={defaultValue:null,kind:"LocalArgument",name:"after"},n={defaultValue:null,kind:"LocalArgument",name:"first"},a=[{kind:"Variable",name:"after",variableName:"after"},{kind:"Variable",name:"first",variableName:"first"}],t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r=[l,t,{alias:null,args:null,kind:"ScalarField",name:"reverseOrder",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"givenName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"familyName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scriptCode",storageKey:null}],i=[t,l,{alias:null,args:null,kind:"ScalarField",name:"uid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isAnon",storageKey:null},{alias:"smallProfileImageUrl",args:[{kind:"Literal",name:"size",value:"small"}],kind:"ScalarField",name:"profileImageUrl",storageKey:'profileImageUrl(size:"small")'},{alias:null,args:null,kind:"ScalarField",name:"profileImageUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isVerified",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"businessStatus",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"profileUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"useTranslatedName",storageKey:null},{alias:null,args:null,concreteType:"UserName",kind:"LinkedField",name:"names",plural:!0,selections:r,storageKey:null},{alias:null,args:null,concreteType:"UserName",kind:"LinkedField",name:"adminNames",plural:!0,selections:r,storageKey:null},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerBundleSubscriptions",value:"true"},condition:"onFeature",selections:[{alias:null,args:null,kind:"ScalarField",name:"consumerBundleActive",storageKey:null}]},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"annotate_with_ids",value:"true"},condition:"onGate",selections:[{alias:null,args:null,kind:"ScalarField",name:"debugInfo",storageKey:null}]}];return{fragment:{argumentDefinitions:[e,n],kind:"Fragment",metadata:null,name:"MessageThreadListQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:a,kind:"FragmentSpread",name:"MessageThreadList_viewer"}],storageKey:null}],type:"QueryRoot",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e],kind:"Operation",name:"MessageThreadListQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:a,concreteType:"ThreadsConnection",kind:"LinkedField",name:"threadsConnection",plural:!1,selections:[t,l,{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ThreadEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[t,l,{alias:null,args:null,concreteType:"Thread",kind:"LinkedField",name:"node",plural:!1,selections:[t,l,{alias:null,args:null,kind:"ScalarField",name:"threadId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isUnreadForViewer",storageKey:null},{alias:null,args:null,concreteType:"Message",kind:"LinkedField",name:"latestMessage",plural:!1,selections:[{alias:null,args:null,concreteType:"QtextDocument",kind:"LinkedField",name:"contentQtextDocument",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"legacyJson",storageKey:null},t],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"author",plural:!1,selections:i,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"time",storageKey:null},t],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"otherUsers",plural:!0,selections:i,storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:a,filters:null,handle:"connection",key:"MessageThreadList_threadsConnection",kind:"LinkedHandle",name:"threadsConnection"},t],storageKey:null}]},params:{id:"c74b457eebf23d61676ca2f0bb8363f2c97d4eea1a7909a8bccccac6b5d0ab32",metadata:{},name:"MessageThreadListQuery",operationKind:"query",text:null}}}();t.hash="024057a991be289a98069e8967d01dac",n["default"]=t},GFUM:function(e,n,a){"use strict";a.r(n);var t=function(){var e={defaultValue:null,kind:"LocalArgument",name:"content"},n={defaultValue:null,kind:"LocalArgument",name:"numMessagesKnownOnClient"},a={defaultValue:null,kind:"LocalArgument",name:"threadId"},t=[{kind:"Variable",name:"content",variableName:"content"},{kind:"Variable",name:"threadId",variableName:"threadId"}],l={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},r=[{kind:"Variable",name:"numMessagesKnownOnClient",variableName:"numMessagesKnownOnClient"}],i={alias:null,args:null,kind:"ScalarField",name:"msgId",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},u=[s,o,{alias:null,args:null,kind:"ScalarField",name:"reverseOrder",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"givenName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"familyName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scriptCode",storageKey:null}];return{fragment:{argumentDefinitions:[e,n,a],kind:"Fragment",metadata:null,name:"ThreadReplyComposer_threadReplyAdd_Mutation",selections:[{alias:null,args:t,concreteType:"ThreadReplyAdd",kind:"LinkedField",name:"threadReplyAdd",plural:!1,selections:[l,{alias:null,args:null,concreteType:"Thread",kind:"LinkedField",name:"thread",plural:!1,selections:[{alias:null,args:r,concreteType:"Message",kind:"LinkedField",name:"allRecentMessages",plural:!0,selections:[i,{args:null,kind:"FragmentSpread",name:"Message_message"}],storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationRoot",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,e,n],kind:"Operation",name:"ThreadReplyComposer_threadReplyAdd_Mutation",selections:[{alias:null,args:t,concreteType:"ThreadReplyAdd",kind:"LinkedField",name:"threadReplyAdd",plural:!1,selections:[l,{alias:null,args:null,concreteType:"Thread",kind:"LinkedField",name:"thread",plural:!1,selections:[{alias:null,args:r,concreteType:"Message",kind:"LinkedField",name:"allRecentMessages",plural:!0,selections:[i,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"author",plural:!1,selections:[s,{alias:null,args:null,kind:"ScalarField",name:"uid",storageKey:null},o,{alias:null,args:null,kind:"ScalarField",name:"isAnon",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"profileImageUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isVerified",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"businessStatus",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"profileUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"useTranslatedName",storageKey:null},{alias:null,args:null,concreteType:"UserName",kind:"LinkedField",name:"names",plural:!0,selections:u,storageKey:null},{alias:null,args:null,concreteType:"UserName",kind:"LinkedField",name:"adminNames",plural:!0,selections:u,storageKey:null},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerBundleSubscriptions",value:"true"},condition:"onFeature",selections:[{alias:null,args:null,kind:"ScalarField",name:"consumerBundleActive",storageKey:null}]},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"annotate_with_ids",value:"true"},condition:"onGate",selections:[{alias:null,args:null,kind:"ScalarField",name:"debugInfo",storageKey:null}]}],storageKey:null},{alias:null,args:null,concreteType:"QtextDocument",kind:"LinkedField",name:"contentQtextDocument",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"legacyJson",storageKey:null},o],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"time",storageKey:null},o],storageKey:null},o],storageKey:null}],storageKey:null}]},params:{id:"87d88f8294e5810e1120ebd7f4b982dc625d06d334430bc65b89d88e89f4ac1d",metadata:{},name:"ThreadReplyComposer_threadReplyAdd_Mutation",operationKind:"mutation",text:null}}}();t.hash="8143817d706948dc77861d3ec5a42910",n["default"]=t},"HC+x":function(e,n,a){"use strict";a.d(n,"a",(function(){return y}));var t=a("J4zp"),l=a.n(t),r=a("QILm"),i=a.n(r),s=a("vOnD"),o=a("RA+f"),u=a("nwxp"),d=a("q1tI"),c=a.n(d),m=a("4Xda"),g=a("zaBG"),f=Object(s["default"])(o.e).withConfig({displayName:"ScrollBox___StyledBox",componentId:"sc-1t8bc7j-0"})(["-webkit-overflow-scrolling:touch;",""],(function(e){return e._css})),p=Object(s["default"])(o.a).withConfig({displayName:"ScrollBox___StyledAbsolute",componentId:"sc-1t8bc7j-1"})(["background-image:linear-gradient( to bottom,rgba(0,0,0,0.05),rgba(0,0,0,0) );pointer-events:none;"]),h=Object(s["default"])(o.a).withConfig({displayName:"ScrollBox___StyledAbsolute2",componentId:"sc-1t8bc7j-2"})(["background-image:linear-gradient( to top,rgba(0,0,0,0.05),rgba(0,0,0,0) );pointer-events:none;"]),y=function(e){var n=e.children,a=e.innerRef,t=e.onAtTopChange,r=e.lockBodyNative,s=void 0===r||r,y=e.showScrollbarOnHover,b=e.wrapperProps,v=e.useShadows,k=e.shadowOffset,S=void 0===k?0:k,F=i()(e,["children","innerRef","onAtTopChange","lockBodyNative","showScrollbarOnHover","wrapperProps","useShadows","shadowOffset"]),E=c.a.useRef(!1),O=c.a.useRef(window.innerHeight),w=c.a.useRef(document.body.style.overflow||""),T=c.a.useState(!1),C=l()(T,2),K=C[0],_=C[1],L=c.a.useState(!1),j=l()(L,2),x=j[0],M=j[1],R=c.a.useRef(Object(g.e)()),I=c.a.useContext(m.b).isDarkModeOn,D=R.current>0,N=I?"rgba(255, 255, 255, .1)":"rgba(0, 0, 0, .1)",U=c.a.useRef((function(){if(a.current){var e=a.current,n=e.scrollTop,l=e.scrollHeight,r=e.clientHeight,i=Object(u.c)()&&E.current&&s?1:0;Object(u.c)()&&s&&(n===l-r?a.current.scrollTo(0,l-r-i):0===n&&a.current.scrollTo(0,i)),n<=i+S&&(null===t||void 0===t||t(!0)),n>i+S&&(null===t||void 0===t||t(!1))}})),B=c.a.useRef((function(){Object(u.c)()&&s&&setTimeout((function(){var e=Math.abs(O.current-300-window.innerHeight)<=50;E.current=e,U.current()}),200)})),V=c.a.useRef((function(){if(window.requestAnimationFrame(U.current),v){var e=a.current,n=e.scrollTop,t=e.scrollHeight,l=e.clientHeight,r=Object(u.c)()&&E.current&&s?1:0;_(n>r+S),M(n+l+r+S<t)}}));return Object(d.useEffect)((function(){Object(u.c)()&&s&&window.addEventListener("resize",B.current)}),[s]),Object(d.useEffect)((function(){null!==a&&void 0!==a&&a.current&&a.current.addEventListener("scroll",V.current)}),[V,a]),Object(d.useEffect)((function(){var e=w.current;return Object(u.g)()&&s&&(document.body.style.overflow="hidden"),U.current(),function(){Object(u.g)()&&s&&(document.body.style.overflow=e)}}),[s,U,w]),c.a.createElement(o.q,Object.assign({display:"flex",flexDirection:"column"},F),c.a.createElement(f,{overflowY:"auto",flex:1,innerRef:a,display:"flex",flexDirection:"column",_css:D&&Object(u.b)()?"\n              &::-webkit-scrollbar-track {\n                background-color: transparent;\n              }\n              &::-webkit-scrollbar-thumb {\n\n                border-radius: 9999em;\n                box-shadow: inset 0 0 ".concat(10,"px ").concat(10,"px ").concat(y?"transparent":N,";\n                border: solid 2px transparent;\n              }\n              &::-webkit-scrollbar {\n                width: ").concat(10,"px;\n              }\n\n              scrollbar-color: ").concat(y?"transparent":N," transparent;\n              scrollbar-width: ").concat(10,"px;\n\n              &:hover {\n                &::-webkit-scrollbar-thumb {\n                  box-shadow: inset 0 0 ").concat(10,"px ").concat(10,"px ").concat(N,";\n                }\n                scrollbar-color: ").concat(N," transparent;\n              }\n          "):""},c.a.createElement(o.e,b,n),c.a.createElement(p,{top:0,fullX:!0,height:6,opacity:K?1:0,transition:"opacity",transitionDuration:"100ms"}),c.a.createElement(h,{bottom:0,fullX:!0,height:6,opacity:x?1:0,transition:"opacity",transitionDuration:"100ms"})))}},"I/VO":function(e,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t=function(){function e(e,n){for(var a=0;a<n.length;a++){var t=n[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,a,t){return a&&e(n.prototype,a),t&&e(n,t),n}}(),l=a("q1tI"),r=u(l),i=u(a("ydcc")),s=u(a("DzJC")),o=u(a("sEfC"));function u(e){return e&&e.__esModule?e:{"default":e}}var d=function(e){function n(e){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var a=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==typeof n&&"function"!==typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return a.scrollListener=a.scrollListener.bind(a),a.throttledScrollListener=(0,s["default"])(a.scrollListener,100,{leading:!1}),a.debouncedScrollListener=(0,o["default"])(a.scrollListener,100),a.eventListenerOptions=a.eventListenerOptions.bind(a),a.mousewheelListener=a.mousewheelListener.bind(a),a}return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,e),t(n,[{key:"componentDidMount",value:function(){this.pageLoaded=this.props.pageStart,this.options=this.eventListenerOptions(),this.attachScrollListener()}},{key:"componentDidUpdate",value:function(){if(this.props.isReverse&&this.loadMore){var e,n=this.getParentElement(this.scrollComponent);this.props.isSafari&&(e=n.style.overflow,n.style.overflow="hidden"),n.scrollTop=n.scrollHeight-this.beforeScrollHeight+this.beforeScrollTop,this.props.isSafari&&(n.style.overflow=e),this.loadMore=!1}this.attachScrollListener()}},{key:"componentWillUnmount",value:function(){this.detachScrollListener(),this.detachMousewheelListener()}},{key:"isPassiveSupported",value:function(){var e=!1,n={get passive(){e=!0}};try{document.addEventListener("test",null,n),document.removeEventListener("test",null,n)}catch(a){}return e}},{key:"eventListenerOptions",value:function(){var e=this.props.useCapture;return this.isPassiveSupported()&&(e={useCapture:this.props.useCapture,passive:!0}),e}},{key:"setDefaultLoader",value:function(e){this.defaultLoader=e}},{key:"detachMousewheelListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.scrollComponent.parentNode),e.removeEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture)}},{key:"detachScrollListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.getParentElement(this.scrollComponent)),e.removeEventListener("scroll",this.throttledScrollListener,this.options?this.options:this.props.useCapture),e.removeEventListener("resize",this.debouncedScrollListener,this.options?this.options:this.props.useCapturee)}},{key:"getParentElement",value:function(e){var n=this.props.getScrollParent&&this.props.getScrollParent();return null!=n?n:e&&e.parentNode}},{key:"filterProps",value:function(e){return e}},{key:"attachScrollListener",value:function(){var e=this.getParentElement(this.scrollComponent);if(this.props.hasMore&&e){var n=window;!1===this.props.useWindow&&(n=e),n.addEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture),n.addEventListener("scroll",this.throttledScrollListener,this.options?this.options:this.props.useCapture),n.addEventListener("resize",this.debouncedScrollListener,this.options?this.options:this.props.useCapture),this.props.initialLoad&&i.onPageReady(this.scrollListener.bind(this))}}},{key:"mousewheelListener",value:function(e){1!==e.deltaY||this.isPassiveSupported()||e.preventDefault()}},{key:"scrollListener",value:function(){var e=this.scrollComponent,n=window,a=this.getParentElement(e),t=void 0;if(this.props.useWindow){var l=document.documentElement||document.body.parentNode||document.body,r=n.pageYOffset!==undefined?n.pageYOffset:l.scrollTop;t=this.props.isReverse?r:this.calculateOffset(e,r)}else this.props.isReverse?t=a.scrollTop:e&&(t=e.scrollHeight-a.scrollTop-a.clientHeight);t<Number(this.props.threshold)&&e&&null!==e.offsetParent&&(this.detachScrollListener(),this.beforeScrollHeight=a.scrollHeight,this.beforeScrollTop=a.scrollTop,"function"===typeof this.props.loadMore&&(this.props.loadMore(this.pageLoaded+=1),this.loadMore=!0))}},{key:"calculateOffset",value:function(e,n){return e?this.calculateTopPosition(e)+(e.offsetHeight-n-window.innerHeight):0}},{key:"calculateTopPosition",value:function(e){return e?e.offsetTop+this.calculateTopPosition(e.offsetParent):0}},{key:"render",value:function(){var e=this,n=this.filterProps(this.props),a=n.children,t=n.element,l=n.hasMore,i=(n.initialLoad,n.isReverse),s=n.loader,o=(n.loadMore,n.pageStart,n.ref),u=(n.threshold,n.useCapture,n.useWindow,n.getScrollParent,n.isSafari,function(e,n){var a={};for(var t in e)n.indexOf(t)>=0||Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t]);return a}(n,["children","element","hasMore","initialLoad","isReverse","loader","loadMore","pageStart","ref","threshold","useCapture","useWindow","getScrollParent","isSafari"]));u.ref=function(n){e.scrollComponent=n,o&&o(n)};var d=[a];return l&&(s?i?d.unshift(s):d.push(s):this.defaultLoader&&(i?d.unshift(this.defaultLoader):d.push(this.defaultLoader))),r["default"].createElement(t,u,d)}}]),n}(l.Component);d.defaultProps={element:"div",hasMore:!1,initialLoad:!0,pageStart:0,ref:null,threshold:250,useWindow:!0,isReverse:!1,useCapture:!1,loader:null,getScrollParent:null,isSafari:!1},n["default"]=d,e.exports=n["default"]},L04J:function(e,n,a){"use strict";a.r(n);var t=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"threadId"}],n=[{kind:"Variable",name:"threadId",variableName:"threadId"}],a={alias:null,args:null,kind:"ScalarField",name:"isUnreadForViewer",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"inboxCount",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"profileNavBadgeCount",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"appBadgeCount",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"feedTabBadgeCount",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"followingTabBadgeCount",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"inboxBadgeCount",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"notificationNavBadgeCount",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"profileBadgeCount",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"silosBadgeCount",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"writeNavBadgeCount",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"tribeNavBadgeCount",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"useProfileDotForBadgeCount",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"markThreadAsRead_threadMarkRead_Mutation",selections:[{alias:null,args:n,concreteType:"ThreadMarkRead",kind:"LinkedField",name:"threadMarkRead",plural:!1,selections:[{alias:null,args:null,concreteType:"Thread",kind:"LinkedField",name:"thread",plural:!1,selections:[a,{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[t,l,{kind:"InlineDataFragmentSpread",name:"nativeBadgeHelpers_updateCounts_viewer",selections:[r,i,s,o,u,d,c,m,g,f]}],storageKey:null}],storageKey:null}],storageKey:null}],type:"MutationRoot",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"markThreadAsRead_threadMarkRead_Mutation",selections:[{alias:null,args:n,concreteType:"ThreadMarkRead",kind:"LinkedField",name:"threadMarkRead",plural:!1,selections:[{alias:null,args:null,concreteType:"Thread",kind:"LinkedField",name:"thread",plural:!1,selections:[a,{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[t,l,r,i,s,o,u,d,c,m,g,f,p],storageKey:null},p],storageKey:null}],storageKey:null}]},params:{id:"92a7ba56a1abb2a0ce12456ecc10bac94423d61492b32e9a94ed34868369166c",metadata:{},name:"markThreadAsRead_threadMarkRead_Mutation",operationKind:"mutation",text:null}}}();t.hash="712edebdf121bc1dc1d5d9a3a88d1cbd",n["default"]=t},LWLz:function(e,n,a){"use strict";a.r(n);var t={argumentDefinitions:[],kind:"Fragment",metadata:{reloadable:{operation:new(a("vfSt")["default"])(()=>a.e("query-ReloadableDesktopMessagesDockHeader_viewerQuery.graphql").then(a.bind(null,"yXi9")),"ReloadableDesktopMessagesDockHeader_viewerQuery.graphql")}},name:"DesktopMessagesDockHeader_viewer",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"inboxCount",storageKey:null,isLive:!0}],type:"Viewer",abstractKey:null,hash:"d390e22c46766da4ddcaa6340f1e438a"};n["default"]=t},LsXc:function(e,n,a){"use strict";a.d(n,"b",(function(){return X}));var t=a("jufJ"),l=a("lwsE"),r=a.n(l),i=a("W8MJ"),s=a.n(i),o=a("7W2i"),u=a.n(o),d=a("a1gu"),c=a.n(d),m=a("Nsbk"),g=a.n(m),f=a("/bbo"),p=a("OMLc"),h=a("RA+f"),y=a("yju1"),b=a("nwxp"),v=a("UyMh"),k=a("q1tI"),S=a.n(k);function F(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,t=g()(e);if(n){var l=g()(this).constructor;a=Reflect.construct(t,arguments,l)}else a=t.apply(this,arguments);return c()(this,a)}}var E=function(e){u()(a,e);var n=F(a);function a(){return r()(this,a),n.apply(this,arguments)}return s()(a,[{key:"renderReactButton",value:function(){return S.a.createElement(h.i,{bottom:"tiny",right:"0",p:"medium",zIndex:"footer"},S.a.createElement(f.a,{size:"large",icon:S.a.createElement(p.b,{name:"NewMessage"}),variant:"red",onClick:function(){Object(v.c)("/messages/new","push")},hasBoxShadow:!0}))}},{key:"render",value:function(){if(Object(b.g)()){var e={visible:!1};Object(b.a)()&&(e.cached=!0),Object(y.a)("setFloatingActionButton",e)}return this.renderReactButton()}}]),a}(S.a.Component);E.displayName="NewMessageFloatingButton";var O=a("gujl"),w=a("VwdU"),T=a("vOnD");function C(e){return S.a.createElement(w.a,{condition:!(!e.hasFloatingActionButtonOnApp||!Object(b.g)())||!(!e.hasFloatingActionButtonOnMweb||!Object(b.f)()),wrapper:function(e){return S.a.createElement(T.ThemeContext.Consumer,null,(function(n){return S.a.createElement(h.e,{pb:58+2*n.space.medium},e)}))}},e.children)}var K,_,L=a("fV0L"),j=a("HC+x"),x=a("06DM"),M=a("SW3P"),R=a("VyO/"),I=a("thGD"),D=a("HZII"),N=a.n(D),U=a("faux"),B=a("MI6j"),V=a("AFGi"),A=a("GxN1"),P=a("hXLn"),H=a("R+um"),q=a("r+vq"),z=a("vcKx");function W(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,t=g()(e);if(n){var l=g()(this).constructor;a=Reflect.construct(t,arguments,l)}else a=t.apply(this,arguments);return c()(this,a)}}var Q=function(e){u()(a,e);var n=W(a);function a(){return r()(this,a),n.apply(this,arguments)}return s()(a,[{key:"componentDidMount",value:function(){var e=this;if(Object(b.g)()){var n=this.props.thread.threadId;Object(I.d)("updateMessageListData",(function(a){n&&(null===a||void 0===a?void 0:a.threadId)===n&&e.refetchData()}))}}},{key:"refetchData",value:function(){var e=this.props,n=e.thread.threadId,a=e.relay;a&&a.refetch({threadId:n},null,(function(){}))}},{key:"render",value:function(){var e=this.props,n=e.thread,l=e.onDesktopClickCallback,r=e.inSideBar,i=e.highlighted,s=n.threadId,o=n.isUnreadForViewer,u=n.latestMessage,d=n.otherUsers,c=n.url;if(!u||!d[0])return S.a.createElement(S.a.Fragment,null);var m=function(){Object(b.b)()&&l?l():Object(b.g)()?Object(y.a)("openURL",{url:c,hideNavigationBar:!0,target:"current"}):Object(v.c)(c,"push")};return S.a.createElement(P.a,{fragmentOrQuery:a.fragments.thread,variables:{id:s},initialData:n},function(){if(!u)return S.a.createElement(S.a.Fragment,null);var e=u.contentQtextDocument.legacyJson,n=Object(V.u)(e,{withLink:!0}),a=0===n.length&&Object(V.m)(JSON.parse(e));return S.a.createElement(z.a.Consumer,null,(function(e){return S.a.createElement(B.b,{size:"large",borderBottom:!0,highlighted:i||(Object(b.e)()||Object(b.b)()&&"dock"===e.container)&&o,bg:"dock"===e.container?"raised":"white",mainText:S.a.createElement(h.j,{alignItems:"flex-start"},S.a.createElement(h.s,{medium:!0,flex:1},S.a.createElement(H.b,{user:d[0]})),S.a.createElement(h.s,{fontSize:"regular"},S.a.createElement(h.s,{fontSize:"tiny",color:"gray_light",display:"inline-block",verticalAlign:"middle"},S.a.createElement(t.FormattedDateTime,{utime:u.time,formatType:"Compact",monthFormatLength:"short"})),Object(b.e)()&&S.a.createElement(p.b,{name:"ChevronRight",size:12,ml:"tiny",verticalAlign:"middle"}))),icon:S.a.createElement(h.q,{ml:"medium",display:"inline-flex",top:Object(b.b)()?3:undefined},S.a.createElement(q.a,{user:d[0],size:r||"dock"===e.container?32:40,linked:!1}),r&&o&&!i?S.a.createElement(h.a,{left:-10,top:13,width:6,height:6,display:"inline-flex"},S.a.createElement(A.b,{size:6,color:"blue"})):null),hover:{bg:"gray_ultralight"},includePageMargin:!1,subText:S.a.createElement(h.s,{truncateLines:2,italic:a},a?S.a.createElement(t.Translate,null,"Sent a photo"):n),secondaryComponent:S.a.createElement(S.a.Fragment,null,r&&i?S.a.createElement(h.a,{right:0,top:"small",bottom:"small",width:2,bg:"blue",borderTopLeftRadius:"pill",borderBottomLeftRadius:"pill"}):undefined),alignSecondaryComponent:"flex-start",alignIcon:"flex-start",onClick:m})}))}())}}]),a}(S.a.Component);Q.fragments={thread:void 0!==K?K:K=a("omYZ")},Q.queries={refetchQuery:void 0!==_?_:_=a("ut3L")},Q.displayName="MessageThreadListItem";var G,J,Y=Object(R.f)(Q),X=function(){Object(R.e)({query:ee.queries.threadList,variables:{first:10,after:null},fetchPolicy:"network-only"})},Z=N()((function(){Object(b.g)()&&Object(I.d)("pageShow",X)})),$=function(e){return S.a.createElement(f.a,Object.assign({},e,{size:"small",icon:S.a.createElement(p.b,{name:"NewMessage"}),isFullWidth:Object(b.b)()}))};$.displayName="NewMessageButton";var ee=function(e){var n,a,l,r=e.viewer,i=e.inSideBar,s=e.highlightedThreadId,o=e.onItemClick,u=e.onNewMessageClickCallback,d=e.relay,c=S.a.useRef(null),m=S.a.useRef(),g=(null!==(n=null===r||void 0===r||null===(a=r.threadsConnection)||void 0===a||null===(l=a.edges)||void 0===l?void 0:l.length)&&void 0!==n?n:0)>0;Z();var f=function(){u?u():Object(v.c)("/messages/new")};return S.a.createElement(S.a.Fragment,null,(i||!Object(b.b)()&&!Object(b.g)())&&S.a.createElement(w.a,{condition:!!i,wrapper:function(e){return S.a.createElement(h.j,{justifyContent:"stretch",alignItems:"flex-end",height:U.a,bg:"white"},S.a.createElement(h.e,{flex:1},e))}},S.a.createElement(x.a,{titleText:S.a.createElement(t.Translate,null,"Messages"),includePageMargin:!0,inCard:!1,bg:"white",secondaryComponent:g&&!Object(b.e)()?S.a.createElement($,{text:S.a.createElement(t.Translate,null,"New"),variant:"blue_outline",onClick:f}):undefined})),g?S.a.createElement(w.a,{condition:!!i,wrapper:function(e){return S.a.createElement(j.a,{useShadows:!0,flex:1,height:"1%",pb:Object(M.a)("unread_messages_filter")?U.c+16:undefined,innerRef:c},e)}},S.a.createElement(S.a.Fragment,null,S.a.createElement(C,{hasFloatingActionButtonOnApp:!0,hasFloatingActionButtonOnMweb:!0},S.a.createElement(L.a,{relayObject:d,autoPaged:{enabled:!0,infiniteScrollOptions:Object(b.b)()?{useWindow:!1,getScrollParent:function(){return c.current},threshold:200}:undefined,pagingElement:Object(b.b)()?m:undefined},connection:r.threadsConnection},(function(e){var n=e.node;return S.a.createElement(Y,{key:n.id,thread:n,onDesktopClickCallback:o?function(){return o(n.threadId)}:undefined,inSideBar:i,highlighted:n.threadId===s})}))),S.a.createElement(h.e,{pb:"1px",innerRef:m}))):i?S.a.createElement(h.j,{p:"large",justifyContent:"center"},S.a.createElement(h.s,{color:"gray_light"},S.a.createElement(t.Translate,null,"No messages"))):S.a.createElement(h.e,null,S.a.createElement(O.a,{type:"dormant",title:S.a.createElement(t.Translate,null,"No messages"),body:S.a.createElement(t.Translate,null,"Connect with others on Quora by beginning a new conversation."),bg:"transparent",buttonComponent:S.a.createElement(h.e,{mt:"large"},S.a.createElement($,{text:S.a.createElement(t.Translate,null,"New message"),variant:"blue",onClick:f}))})),Object(b.e)()&&S.a.createElement(E,null))};ee.displayName="MessageThreadList",ee.fragments={viewer:void 0!==G?G:G=a("jYY5")},ee.queries={threadList:void 0!==J?J:J=a("G14d")};var ne={query:ee.queries.threadList,direction:"forward",getConnectionFromProps:function(e){return e.viewer.threadsConnection},getVariables:function(e,n){return{first:10,after:n.cursor}},getFragmentVariables:function(e){return e}};ee.connectionConfig=ne;n.a=Object(R.d)(ee)},MhPQ:function(e,n,a){"use strict";a.d(n,"a",(function(){return d})),a.d(n,"c",(function(){return c})),a.d(n,"b",(function(){return m}));var t=a("jufJ"),l=a("cbxS"),r=a("OMLc"),i=a("RA+f"),s=a("nwxp"),o=a("q1tI"),u=a.n(o),d=function(e){var n=e.onClick;return u.a.createElement(i.e,{p:"small"},u.a.createElement(l.a,{buttonOnClick:n,buttonTitle:u.a.createElement(t.Translate,null,"Try again"),buttonVariant:"error",variant:"warning_inverted",icon:u.a.createElement(r.b,{name:"NoConnection"}),title:u.a.createElement(t.Translate,null,"Unable to load more. Check your internet connection."),iconPosition:Object(s.b)()?"centered":undefined}))},c=function(e){var n=e.onClick;return u.a.createElement(i.e,{p:"small"},u.a.createElement(l.a,{buttonOnClick:n,buttonTitle:u.a.createElement(t.Translate,null,"Try again"),buttonVariant:"error",variant:"warning_inverted",icon:u.a.createElement(r.b,{name:"Error"}),title:u.a.createElement(t.Translate,null,"There was an error loading more items."),iconPosition:Object(s.b)()?"centered":undefined}))},m=function(){return u.a.createElement(i.e,{p:"small",borderBottom:!0},u.a.createElement(l.a,{variant:"warning_inverted",icon:u.a.createElement(r.b,{name:"Error"}),title:u.a.createElement(t.Translate,null,"There was an error loading this item.")}))}},O2TS:function(e,n,a){"use strict";a.d(n,"a",(function(){return o}));var t,l=a("yju1"),r=a("nwxp"),i=a("/Zbp"),s=a("0UDP"),o=function(e,n,o){var d=Object(s.readInlineData)(void 0!==t?t:t=a("73KL"),e),c={count:d.profileBadgeCount,style:d.useProfileDotForBadgeCount?"dot":"count"};Object(l.a)("updateBadgeProperties",Object.assign({timestamp:Object(i.p)(),value:d.appBadgeCount,inbox:d.inboxBadgeCount,silos:JSON.parse(d.silosBadgeCount),feed:{count:d.feedTabBadgeCount,style:"count"},following:{count:d.followingTabBadgeCount,style:"dot"},notifs:{count:n||d.notificationNavBadgeCount,style:"count"},openqs:{count:d.writeNavBadgeCount,style:"count"},profile:c},Object(r.g)()?{}:{spaces:{count:d.tribeNavBadgeCount,style:"dot"}})),Object(r.c)()&&!0!==o&&Object(l.a)("broadcastAllWebViews",{messageName:"updateTribeBadgeCount",data:{tribeNavBadgeCount:d.tribeNavBadgeCount}}),u(c)},u=function(e){if(Object(r.g)()){var n={messageName:"updateProfileBadgeCount",data:e};Object(l.a)("broadcastAllWebViews",n)}}},PRXj:function(e,n,a){"use strict";var t=a("QILm"),l=a.n(t),r=a("vOnD"),i=a("RA+f"),s=a("q1tI"),o=a.n(s),u=Object(r["default"])(i.s).withConfig({displayName:"TextInputWrapper___StyledText",componentId:"abzlxg-0"})([""," .doc{min-height:0;margin:0;padding:0;line-height:1.5;}"],(function(e){return e._css})),d=function(e){var n=e.children,a=e.theme,t=e.hasBorder,r=e.borderColor,i=void 0===r?a.colors.border.gray:r,s=e.borderRadius,d=void 0===s?"large":s,c=e.borderWidth,m=void 0===c?.5:c,g=l()(e,["children","theme","hasBorder","borderColor","borderRadius","borderWidth"]);return o.a.createElement(u,Object.assign({color:"gray_dark",fontSize:"regular",py:"small",px:"medium",bg:"white",flex:1,borderRadius:d,minWidth:"0"},g,{boxShadow:t?"inset 0 0 0 1px ".concat(i):undefined,_css:t?"@media only screen and (-webkit-min-device-pixel-ratio: 1.5) {\n          box-shadow: inset 0 0 0 ".concat(m,"px ").concat(i," !important;\n        }"):undefined}),n)};d.displayName="TextInputWrapper",n.a=Object(r.withTheme)(d)},PpKx:function(e,n,a){"use strict";a.r(n);var t=function(){var e={defaultValue:null,kind:"LocalArgument",name:"after"},n={defaultValue:null,kind:"LocalArgument",name:"first"},a={defaultValue:null,kind:"LocalArgument",name:"threadId"},t=[{kind:"Variable",name:"threadId",variableName:"threadId"}],l={alias:null,args:null,kind:"ScalarField",name:"uid",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"threadId",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"isUnreadForViewer",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"isPotentialSpamForViewer",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},d={alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null}],storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"useTranslatedName",storageKey:null},g=[u,o,{alias:null,args:null,kind:"ScalarField",name:"reverseOrder",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"givenName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"familyName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scriptCode",storageKey:null}],f={alias:null,args:null,concreteType:"UserName",kind:"LinkedField",name:"names",plural:!0,selections:g,storageKey:null},p={alias:null,args:null,concreteType:"UserName",kind:"LinkedField",name:"adminNames",plural:!0,selections:g,storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"isAnon",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"profileImageUrl",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"isVerified",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"businessStatus",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"profileUrl",storageKey:null},S={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"annotate_with_ids",value:"true"},condition:"onGate",selections:[{alias:null,args:null,kind:"ScalarField",name:"debugInfo",storageKey:null}]},F={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerBundleSubscriptions",value:"true"},condition:"onFeature",selections:[{alias:null,args:null,kind:"ScalarField",name:"consumerBundleActive",storageKey:null}]},E=[{kind:"Variable",name:"after",variableName:"after"},{kind:"Variable",name:"first",variableName:"first"}];return{fragment:{argumentDefinitions:[e,n,a],kind:"Fragment",metadata:null,name:"MessagesThreadQuery",selections:[{alias:null,args:t,concreteType:"Thread",kind:"LinkedField",name:"thread",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"otherUsers",plural:!0,selections:[l,{args:null,kind:"FragmentSpread",name:"UserName_user"},{args:null,kind:"FragmentSpread",name:"UserPhoto_user"}],storageKey:null},r,i,s,{alias:"messagesConnection",args:null,concreteType:"MessagesConnection",kind:"LinkedField",name:"__MessagesThread_messagesConnection_connection",plural:!1,selections:[o,u,d,{alias:null,args:null,concreteType:"MessageEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Message",kind:"LinkedField",name:"node",plural:!1,selections:[o,u,{args:null,kind:"FragmentSpread",name:"Message_message"}],storageKey:null},c],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"ThreadReplyComposer_thread"},{args:null,kind:"FragmentSpread",name:"FirstMessageBanner_thread"},{args:null,kind:"FragmentSpread",name:"ThreadOverflowMenu_thread"}],storageKey:null}],type:"QueryRoot",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,n,e],kind:"Operation",name:"MessagesThreadQuery",selections:[{alias:null,args:t,concreteType:"Thread",kind:"LinkedField",name:"thread",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"otherUsers",plural:!0,selections:[l,o,u,m,f,p,h,y,b,v,k,{alias:null,args:null,kind:"ScalarField",name:"viewerCanMessage",storageKey:null},S,F],storageKey:null},r,{alias:null,args:null,kind:"ScalarField",name:"isFromModeration",storageKey:null},{alias:null,args:null,concreteType:"Network",kind:"LinkedField",name:"network",plural:!1,selections:[{alias:"helpCenterLink",args:[{kind:"Literal",name:"name",value:"help_center"}],kind:"ScalarField",name:"linkUrl",storageKey:'linkUrl(name:"help_center")'},o],storageKey:null},i,s,{alias:null,args:null,kind:"ScalarField",name:"eligibleToSendReason",storageKey:null},{alias:null,args:null,concreteType:"Tribe",kind:"LinkedField",name:"eligibleToSendReasonTribe",plural:!1,selections:[o,u,{alias:null,args:null,kind:"ScalarField",name:"tribeId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nameString",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},o,{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[o,{alias:null,args:null,kind:"ScalarField",name:"inboxCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"profileNavBadgeCount",storageKey:null}],storageKey:null},{alias:null,args:E,concreteType:"MessagesConnection",kind:"LinkedField",name:"messagesConnection",plural:!1,selections:[o,u,d,{alias:null,args:null,concreteType:"MessageEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Message",kind:"LinkedField",name:"node",plural:!1,selections:[o,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"author",plural:!1,selections:[u,l,o,h,y,b,v,k,m,f,p,F,S],storageKey:null},{alias:null,args:null,concreteType:"QtextDocument",kind:"LinkedField",name:"contentQtextDocument",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"legacyJson",storageKey:null},o],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"time",storageKey:null},u],storageKey:null},c,o],storageKey:null}],storageKey:null},{alias:null,args:E,filters:null,handle:"connection",key:"MessagesThread_messagesConnection",kind:"LinkedHandle",name:"messagesConnection"},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"reportableId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"canViewerReport",storageKey:null}],type:"Reportable",abstractKey:"__isReportable"}],storageKey:null}]},params:{id:"10b4e5ef31ac2db15ad81fe2abffbbb9311fc46f2628ea95484e2995a041900e",metadata:{connection:[{count:"first",cursor:"after",direction:"forward",path:["thread","messagesConnection"]}]},name:"MessagesThreadQuery",operationKind:"query",text:null}}}();t.hash="e8c4670bf8e2d9e69ba561e787faadf2",n["default"]=t},UiPH:function(e,n,a){"use strict";a.r(n);var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DesktopMessagesDockHeader_thread",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"threadId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isUnreadForViewer",storageKey:null,isLive:!0},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"otherUsers",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"uid",storageKey:null},{args:null,kind:"FragmentSpread",name:"UserName_user"},{args:null,kind:"FragmentSpread",name:"UserPhoto_user"}],storageKey:null}],type:"Thread",abstractKey:null,hash:"29bad934ee1bb201925f769ed4f86747"};n["default"]=t},WBlH:function(e,n,a){"use strict";a.d(n,"a",(function(){return u}));var t=a("lSNA"),l=a.n(t),r=a("jufJ"),i=a("q1tI"),s=a.n(i),o=a("teWg");function u(e){var n,a=e.status;return s.a.createElement(r.Translate,null,s.a.createElement(r.EnumTranslate,{value:a},(n={},l()(n,o.a.suspected_spam,"The message you are trying to send contains content which has been identified as unsafe or abusive."),l()(n,o.a.unconfirmed_email,"Please confirm your email before sending this message."),l()(n,o.a.unsupported_characters,"Your message has failed to send because it contains unsupported characters."),l()(n,o.a.disabled_inbox,"This user currently has turned off receiving inbox messages."),l()(n,o.a.daily_rate_limit_exceeded,"You have reached the daily limit of sending messages to people who are not following you."),l()(n,o.a.no_access,"You don't have access to this thread."),n)))}},WtiG:function(e,n,a){"use strict";a.r(n);var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FirstMessageBanner_thread",selections:[{alias:null,args:null,kind:"ScalarField",name:"isPotentialSpamForViewer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"eligibleToSendReason",storageKey:null},{alias:null,args:null,concreteType:"Tribe",kind:"LinkedField",name:"eligibleToSendReasonTribe",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"TribeLink_tribe"}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"otherUsers",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"uid",storageKey:null},{args:null,kind:"FragmentSpread",name:"UserName_user"}],storageKey:null},{args:null,kind:"FragmentSpread",name:"Report_reportable"}],type:"Thread",abstractKey:null,hash:"ea7265cb2f7f540cb8d82814c1ef83ac"};n["default"]=t},XNsX:function(e,n,a){"use strict";a.d(n,"a",(function(){return o}));var t=a("zUwh"),l=a("RA+f"),r=a("nwxp"),i=a("q1tI"),s=a.n(i);function o(){var e=arguments.length>0&&arguments[0]!==undefined&&arguments[0];if(Object(r.f)())return null;var n=Object(r.b)()?e?54:132:94;return s.a.createElement(l.j,{flexDirection:"column",alignItems:"stretch",flex:1,height:"100%"},s.a.createElement(l.j,{flex:1,flexDirection:"column",alignItems:"stretch",justifyContent:"flex-end",px:"medium",py:"large"},s.a.createElement(t.f,{maskColor:e?"raised":"white"})),s.a.createElement(l.e,{bg:e?"raised":"white",height:n}))}},YcUQ:function(e,n,a){"use strict";a.r(n);var t=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"threadId"}],n=[{alias:null,args:[{kind:"Variable",name:"threadId",variableName:"threadId"}],concreteType:"HideThread",kind:"LinkedField",name:"hideThread",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"HideThread_hideThread_Mutation",selections:n,type:"MutationRoot",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"HideThread_hideThread_Mutation",selections:n},params:{id:"0e8738d7be99cffd522e101b06772b98b6a25624dadd2e47f44b7a906665afa3",metadata:{},name:"HideThread_hideThread_Mutation",operationKind:"mutation",text:null}}}();t.hash="ee9bf52dee586f8b2d34a92ce15ed018",n["default"]=t},bfHU:function(e,n,a){"use strict";a.r(n);var t=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};return{argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"after"},{defaultValue:20,kind:"LocalArgument",name:"first"}],kind:"Fragment",metadata:{connection:[{count:"first",cursor:"after",direction:"forward",path:["messagesConnection"]}]},name:"MessagesThread_thread",selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"otherUsers",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"uid",storageKey:null},{args:null,kind:"FragmentSpread",name:"UserName_user"},{args:null,kind:"FragmentSpread",name:"UserPhoto_user"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"threadId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"numMessages",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isUnreadForViewer",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPotentialSpamForViewer",storageKey:null},{alias:"messagesConnection",args:null,concreteType:"MessagesConnection",kind:"LinkedField",name:"__MessagesThread_messagesConnection_connection",plural:!1,selections:[e,n,{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"MessageEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Message",kind:"LinkedField",name:"node",plural:!1,selections:[e,n,{args:null,kind:"FragmentSpread",name:"Message_message"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"ThreadReplyComposer_thread"},{args:null,kind:"FragmentSpread",name:"FirstMessageBanner_thread"},{args:null,kind:"FragmentSpread",name:"ThreadOverflowMenu_thread"}],type:"Thread",abstractKey:null}}();t.hash="d1c639417325f4e7b91e4159a86dd3e1",n["default"]=t},doju:function(e,n,a){"use strict";a.r(n);var t=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ThreadMarkUnread_thread",selections:[{alias:null,args:null,kind:"ScalarField",name:"threadId",storageKey:null},e,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"otherUsers",plural:!0,selections:[{args:null,kind:"FragmentSpread",name:"UserName_user"}],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"inboxCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"profileNavBadgeCount",storageKey:null}],storageKey:null}],type:"Thread",abstractKey:null}}();t.hash="b66bc77eb3768a606a20f0741f44fd9d",n["default"]=t},fV0L:function(e,n,a){"use strict";var t,l=a("J4zp"),r=a.n(l),i=a("ZizP"),s=a("td6z"),o=a("MhPQ"),u=a("nG0s"),d=a("RA+f"),c=a("8Fmb"),m=a("vfSt"),g=a("s/A7"),f=a("zZ0H"),p=a.n(f),h=a("q1tI"),y=a.n(h),b=a("/bbo"),v=a("OMLc"),k=a("wxi4"),S=a("9Qrs"),F=a("edYY"),E=a("vOnD"),O=Object(E.withTheme)((function(e){var n=e.text,a=e.refetch,t=e.loading,l=e.theme;return y.a.createElement(S.a.Consumer,null,(function(e){return y.a.createElement(k.d,{justifyContent:"center",zIndex:l.zIndices.tooltip+1,top:Object(F.a)({isPrefetched:e}),display:"flex",alignItems:"flex-start",height:0},y.a.createElement(k.c,{top:"small"},y.a.createElement(d.c,{"in":!0,appear:!0},(function(e){return y.a.createElement(d.g,{fadeIn:!0,fadeOut:!0,animation:e,slideIn:"top",slideOut:"top",slideDistance:"small"},y.a.createElement(b.a,{icon:y.a.createElement(v.b,{name:"Sync"}),text:n,hasBoxShadow:!0,onClick:a,size:"small",loading:t}))}))))}))}));!function(e){e[e.HIDDEN=0]="HIDDEN",e[e.LOADING=1]="LOADING",e[e.FINISHED=2]="FINISHED"}(t||(t={}));var w=function(e){var n=e.relayObject,a=e.connection,l=e.liveBannerConfig,i=e.refetchList,s=e.children,o=y.a.useRef({}),f=y.a.useState(t.HIDDEN),h=r()(f,2),b=h[0],v=h[1],k=y.a.useState(null===l||void 0===l?void 0:l.hashValue),S=r()(k,2),F=S[0],E=S[1],w=y.a.useRef(undefined),T=y.a.useCallback((function(e){return((null===l||void 0===l?void 0:l.overrideItemId)||function(e){var n;return null===e||void 0===e||null===(n=e.node)||void 0===n?void 0:n.id})(e)}),[l]),C=y.a.useCallback((function(){return(null!==a&&void 0!==a&&a.edges?null===a||void 0===a?void 0:a.edges.map(T):[]).filter((function(e){return!!e}))}),[a,T]),K=y.a.useState(C),_=r()(K,2),L=_[0],j=_[1],x=null===l||void 0===l?void 0:l.variables(n.getFragmentVariables()),M=Object(m.useQueryLoader)(null===l||void 0===l?void 0:l.query);Object(c.f)(M,x,null===l||void 0===l?void 0:l.initialData,!!l),y.a.useEffect((function(){b===t.FINISHED&&window.requestAnimationFrame((function(){var e=null===a||void 0===a?void 0:a.edges.find((function(e){return T(e)&&!L.includes(T(e))}));e&&(w.current=T(e)),j(C),v(t.HIDDEN),E(null===l||void 0===l?void 0:l.hashValue)}))}),[b,C,a,L,T,E,l]),y.a.useEffect((function(){var e=w.current;if(e&&o.current[e]){var n=o.current[e];w.current=undefined,Object(g.a)(n,"center")}}));var R=y.a.useCallback((function(){v(t.LOADING),i().then((function(){v(t.FINISHED)}))}),[v,i]),I=!0;if(!l)return y.a.createElement(y.a.Fragment,null,s(p.a));var D=l.hashValue,N=l.ignoreList;if(F&&D!==F||(I=!1),N){var U=String(F).split(":");String(D).split(":").some((function(e){return!U.includes(e)&&!N.includes(e)}))||(I=!1)}return y.a.createElement(y.a.Fragment,null,y.a.createElement(u.a,{enabled:I},y.a.createElement(O,{refetch:R,text:l.bannerText,loading:b===t.LOADING})),s((function(e){var n=e.key;return y.a.createElement(d.e,{key:n,innerRef:function(e){return o.current[n]=e}},e)})))};w.displayName="PagedListLiveUpdater";var T=w,C=a("VwdU"),K=a("+pxc"),_=a("8lmh"),L=a("SW3P"),j=a("AaDK"),x=a("VSaK"),M=a("3W2L"),R=a("nwxp"),I=a("vN+2"),D=a.n(I),N=a("/Zbp"),U=a("o8/o"),B=a("ob4f"),V=a("h39y"),A=a("I/VO"),P=a.n(A),H=function(e){var n=e.children,a=e.onVisibilityChange,t=Object(B.b)(),l=r()(t,2),i=l[0],s=l[1];return Object(h.useEffect)((function(){return a(s)}),[s]),y.a.createElement(d.e,{innerRef:i},n)};H.displayName="PagedListLoadingIndicatorWrapper";var q=function(e){var n=e.edge,a=e.index,t=e.isLastItem,l=e.loading,r=e.error,s=e.readyToLoadMore,o=e.loadMore,u=e.removeItemById,d=e.singleItemErrorComponent,c=e.children,m=Object(h.useCallback)((function(e){return u(n.node.id,e)}),[u,n.node.id]),g=Object(h.useCallback)((function(){return d}),[d]);return y.a.createElement(i.a,{errorChildren:g},c({index:a,node:n.node,isLastItem:t,loading:l,error:r,readyToLoadMore:s,loadMore:o,removeItem:m}))};q.displayName="PagedListItemWrapper";var z=function(e){var n,a,t,l,i,u=e.relayObject,d=e.autoPaged,c=void 0===d?{}:d,g=e.onPagingStart,f=void 0===g?D.a:g,b=e.onPagingEnd,v=void 0===b?D.a:b,k=e.pagingIndicator,S=void 0===k?y.a.createElement(s.c,{key:"loading"}):k,F=e.loadingIndicator,E=e.endOfPageComponent,O=void 0===E?function(){return!1}:E,w=e.endOfContentComponent,I=void 0===w?function(){return!1}:w,A=e.connectionIssueComponent,z=void 0===A?function(e){return y.a.createElement(o.a,{onClick:e})}:A,W=e.errorComponent,Q=void 0===W?function(e){return y.a.createElement(o.c,{onClick:e})}:W,G=e.singleItemErrorComponent,J=void 0===G?y.a.createElement(o.b,null):G,Y=e.connection,X=e.liveBannerConfig,Z=e.children,$=e.listWrapper,ee=void 0===$?p.a:$,ne=e.as,ae=void 0===ne?"div":ne,te=e.prefetchingEnabled,le=void 0===te||te,re=e.reverseOrder,ie=void 0!==re&&re,se=e.initialPageSize,oe=e.debugName,ue=Object(h.useState)(null),de=r()(ue,2),ce=de[0],me=de[1],ge=Object(h.useState)(!1),fe=r()(ge,2),pe=fe[0],he=fe[1],ye=Object(h.useRef)(!1),be=Object(h.useState)(null!==(n=null!==se&&void 0!==se?se:null===Y||void 0===Y||null===(a=Y.edges)||void 0===a?void 0:a.length)&&void 0!==n?n:0),ve=r()(be,2),ke=ve[0],Se=ve[1],Fe=Object(h.useRef)(undefined),Ee=Object(B.b)(),Oe=r()(Ee,2),we=Oe[0],Te=Oe[1];!function(e){e&&("enabled"in e||(e.enabled=!1),"infiniteScrollOptions"in e||(e.infiniteScrollOptions={}),e.infiniteScrollOptions&&!("threshold"in e.infiniteScrollOptions)&&(e.infiniteScrollOptions.threshold=1e3),e.infiniteScrollOptions&&(e.infiniteScrollOptions.isSafari=Object(R.e)()&&Object(K.c)()))}(c);var Ce=(null===Y||void 0===Y?void 0:Y.edges)&&ke<Y.edges.length,Ke=!!ce&&Object(_.isConnectionError)(ce),_e=null!==(t=null===Y||void 0===Y?void 0:Y.__typename)&&void 0!==t?t:"";oe&&(_e+="_".concat(oe));var Le=Object(M.b)("paging",_e),je=r()(Le,3),xe=je[0],Me=je[1],Re=je[2],Ie=Object(h.useCallback)((function(){Math.random()<(Object(L.a)("paging_perf_sample_rate")||0)&&(Fe.current={pagingStart:Object(N.p)()}),f(),Re()}),[f,Re]),De=Object(h.useCallback)((function(e,n){v(e,n),xe()}),[v,xe]),Ne=u.connectionConfig.query,Ue=Promise.resolve();Ne instanceof m["default"]&&(Ue=Ne.loadQuery().then((function(e){u.connectionConfig.query=e})));var Be=Object(h.useCallback)((function(e,n){return Ue.then((function(){return new Promise((function(a){(e?u.refetchConnection:u.loadMore)(0,(function(e){e&&(console.error(e),me(e)),De(null!==e&&void 0!==e?e:null,u.hasMore()),he(!1),a()}),n)}))}))}),[u,De,he,Ue]),Ve=Object(h.useCallback)((function(){if(!pe&&!u.isLoading())return le&&Ce?(Ie(),De(null,u.hasMore()),Se((function(e){var n,a;return null!==(n=null===Y||void 0===Y||null===(a=Y.edges)||void 0===a?void 0:a.length)&&void 0!==n?n:e})),he(!1),void me(null)):void(u.hasMore()&&(Ie(),he(!0),me(null),Be()))}),[Y,pe,u,le,Ce,Ie,De,Se,he,me,Be]);Object(h.useEffect)((function(){var e=u.connectionConfig.query;e instanceof m["default"]&&e.loadQuery()}),[u]);var Ae=null===Y||void 0===Y||null===(l=Y.edges)||void 0===l?void 0:l.length;Object(h.useEffect)((function(){(pe||c.enabled)&&Se((function(e){return null!==Ae&&void 0!==Ae?Ae:e}))}),[pe,c.enabled,Se,Ae]),Object(h.useEffect)((function(){if(Object(L.a)("paged_list_perf")&&ye.current&&!pe&&Fe.current){var e,n=Object(N.p)(),a=u.connectionConfig.query.isQueryLoader?u.connectionConfig.query.queryOrNull():u.connectionConfig.query;Object(j["default"])("paging_perf",Object.assign({},Fe.current,{pagingComplete:n,query:null===a||void 0===a||null===(e=a.operation)||void 0===e?void 0:e.name})),Fe.current=undefined}}),[pe,ye.current,!!Fe.current]),Object(h.useEffect)((function(){var e=(null===Y||void 0===Y?void 0:Y.edges)&&ke<Y.edges.length;!ce&&le&&!e&&u.hasMore()&&!u.isLoading()&&Te&&Be()}),[ce,le,Te,Y,ke,Be,u]),Object(h.useEffect)((function(){var e=c.pagingElement;if(e){var n=function(){Object(U.a)(e,"onScrollHandler called when there is no paging element"),pe&&function(e){var n,a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(null===e||void 0===e||null===(n=e.current)||void 0===n||!n.getBoundingClientRect)return!1;var t=e.current.getBoundingClientRect().top;return t+a>=0&&t-a<=window.innerHeight}(e)&&Ve()};return Object(x.b)(n),function(){Object(x.a)(n)}}return undefined}),[c.pagingElement,pe,Ve]),Object(h.useEffect)((function(){ye.current=pe}),[pe]);var Pe=y.a.createElement(H,{onVisibilityChange:Object(h.useCallback)((function(e){e&&Fe.current&&!Fe.current.indicatorSeen&&(Fe.current.indicatorSeen=Object(N.p)()),Me(e)}),[Fe]),key:"pagingIndicator"},S),He=Object(h.useCallback)((function(e,n){var a=null===Y||void 0===Y?void 0:Y.__id;if(a){var t=function(n){var t=n.get(a);t&&V.ConnectionHandler.deleteNode(t,e)};n?t(n):Object(V.commitLocalUpdate)(u.environment,t)}}),[u,null===Y||void 0===Y?void 0:Y.__id]),qe=((le?null===Y||void 0===Y?void 0:Y.edges.slice(0,ke):null===Y||void 0===Y?void 0:Y.edges)||[]).filter((function(e){return!!e&&!!e.node})),ze=(ie?qe.slice().reverse():qe).map((function(e,n){return y.a.createElement(q,{index:n,edge:e,isLastItem:n===qe.length-1,loading:u.isLoading()||pe,error:ce,readyToLoadMore:!u.isLoading()&&!pe&&u.hasMore(),loadMore:Ve,singleItemErrorComponent:J,removeItemById:He,key:e.node.id},Z)}));return!u||u.isLoading()&&!pe&&0===ke&&F?F||null:y.a.createElement(C.a,{condition:null!==(i=c.enabled)&&void 0!==i&&i,wrapper:function(e){return y.a.createElement(P.a,Object.assign({loadMore:Ve,hasMore:!ce&&u.hasMore(),loader:Pe,element:ae},c.infiniteScrollOptions),e)},elseWrapper:function(e){var n=ae;return y.a.createElement(n,{ref:we},e)}},y.a.createElement(T,{relayObject:u,connection:Y,liveBannerConfig:X,refetchList:function(){var e,n=null===Y||void 0===Y||null===(e=Y.edges)||void 0===e?void 0:e.length;return Ie(),Be(!0,{first:n&&n+1,refetch:!0})}},(function(e){return y.a.createElement(y.a.Fragment,null,ze&&ee(ze.map(e)),!c.enabled&&pe&&Pe,!ce&&!pe&&!c.enabled&&(Ce||u.hasMore())&&O(Ve),!ce&&!u.isLoading()&&!pe&&!u.hasMore()&&!Ce&&I(),ce&&Ke&&z(Ve),ce&&!Ke&&Q(Ve))})))};z.displayName="PagedList";n.a=z},faux:function(e,n,a){"use strict";a.d(n,"b",(function(){return l})),a.d(n,"a",(function(){return r})),a.d(n,"c",(function(){return i}));var t=a("d1zJ"),l=320,r=t.b,i=36},jYY5:function(e,n,a){"use strict";a.r(n);var t=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};return{argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"after"},{defaultValue:10,kind:"LocalArgument",name:"first"}],kind:"Fragment",metadata:{connection:[{count:"first",cursor:"after",direction:"forward",path:["threadsConnection"]}]},name:"MessageThreadList_viewer",selections:[{alias:"threadsConnection",args:null,concreteType:"ThreadsConnection",kind:"LinkedField",name:"__MessageThreadList_threadsConnection_connection",plural:!1,selections:[e,n,{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ThreadEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[e,n,{alias:null,args:null,concreteType:"Thread",kind:"LinkedField",name:"node",plural:!1,selections:[e,n,{alias:null,args:null,kind:"ScalarField",name:"threadId",storageKey:null},{args:null,kind:"FragmentSpread",name:"MessageThreadListItem_thread"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null}],storageKey:null}],type:"Viewer",abstractKey:null}}();t.hash="45be8f2cbcffc046c02d145198d7c929",n["default"]=t},jhIG:function(e,n,a){"use strict";a.r(n);var t=function(){var e={defaultValue:null,kind:"LocalArgument",name:"numMessagesKnownOnClient"},n={defaultValue:null,kind:"LocalArgument",name:"threadId"},a=[{kind:"Variable",name:"threadId",variableName:"threadId"}],t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"msgId",storageKey:null},i=[{kind:"Variable",name:"numMessagesKnownOnClient",variableName:"numMessagesKnownOnClient"}],s={platforms:["DESKTOP"]},o={alias:null,args:null,kind:"ScalarField",name:"uid",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"isAnon",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"profileImageUrl",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"isVerified",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"businessStatus",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"profileUrl",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"useTranslatedName",storageKey:null},p=[l,t,{alias:null,args:null,kind:"ScalarField",name:"reverseOrder",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"givenName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"familyName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scriptCode",storageKey:null}],h={alias:null,args:null,concreteType:"UserName",kind:"LinkedField",name:"names",plural:!0,selections:p,storageKey:null},y={alias:null,args:null,concreteType:"UserName",kind:"LinkedField",name:"adminNames",plural:!0,selections:p,storageKey:null},b={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerBundleSubscriptions",value:"true"},condition:"onFeature",selections:[{alias:null,args:null,kind:"ScalarField",name:"consumerBundleActive",storageKey:null}]},v={kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"annotate_with_ids",value:"true"},condition:"onGate",selections:[{alias:null,args:null,kind:"ScalarField",name:"debugInfo",storageKey:null}]},k={alias:null,args:null,concreteType:"QtextDocument",kind:"LinkedField",name:"contentQtextDocument",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"legacyJson",storageKey:null},t],storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"time",storageKey:null},F=[t,l,o,u,{alias:"smallProfileImageUrl",args:[{kind:"Literal",name:"size",value:"small"}],kind:"ScalarField",name:"profileImageUrl",storageKey:'profileImageUrl(size:"small")'},d,c,m,g,f,h,y,b,v];return{fragment:{argumentDefinitions:[e,n],kind:"Fragment",metadata:null,name:"LatestMessagesLoaderReloadableQuery",selections:[{alias:null,args:a,concreteType:"Thread",kind:"LinkedField",name:"thread",plural:!1,selections:[t,l,{alias:null,args:null,concreteType:"Message",kind:"LinkedField",name:"latestMessage",plural:!1,selections:[r],storageKey:null},{alias:null,args:i,concreteType:"Message",kind:"LinkedField",name:"allRecentMessages",plural:!0,selections:[r,{args:null,kind:"FragmentSpread",name:"Message_message"}],storageKey:null,isLive:!0},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:s,condition:"onPlatform",selections:[{args:null,kind:"FragmentSpread",name:"MessageThreadListItem_thread"}]}],storageKey:null}],type:"QueryRoot",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e],kind:"Operation",name:"LatestMessagesLoaderReloadableQuery",selections:[{alias:null,args:a,concreteType:"Thread",kind:"LinkedField",name:"thread",plural:!1,selections:[t,l,{alias:null,args:null,concreteType:"Message",kind:"LinkedField",name:"latestMessage",plural:!1,selections:[r,t],storageKey:null},{alias:null,args:i,concreteType:"Message",kind:"LinkedField",name:"allRecentMessages",plural:!0,selections:[r,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"author",plural:!1,selections:[l,o,t,u,d,c,m,g,f,h,y,b,v],storageKey:null},k,S,t],storageKey:null},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:s,condition:"onPlatform",selections:[{alias:null,args:null,kind:"ScalarField",name:"threadId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isUnreadForViewer",storageKey:null},{alias:null,args:null,concreteType:"Message",kind:"LinkedField",name:"latestMessage",plural:!1,selections:[k,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"author",plural:!1,selections:F,storageKey:null},S,t],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"otherUsers",plural:!0,selections:F,storageKey:null}]}],storageKey:null}]},params:{id:"df5b3176eaa9554b01f00df3fd9822247e2cb0095fe89d81d5602ccc25c1c2b9",metadata:{},name:"LatestMessagesLoaderReloadableQuery",operationKind:"query",text:null}}}();t.hash="c85ddb16473b1e31d1503c9b9cb20157",n["default"]=t},kBEN:function(e,n,a){"use strict";a.r(n);var t=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"threadId"}],n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},a=[{alias:null,args:[{kind:"Variable",name:"threadId",variableName:"threadId"}],concreteType:"ThreadMarkUnread",kind:"LinkedField",name:"threadMarkUnread",plural:!1,selections:[{alias:null,args:null,concreteType:"Thread",kind:"LinkedField",name:"thread",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"isUnreadForViewer",storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"inboxCount",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"profileNavBadgeCount",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ThreadMarkUnread_threadMarkUnread_Mutation",selections:a,type:"MutationRoot",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ThreadMarkUnread_threadMarkUnread_Mutation",selections:a},params:{id:"30148ad41564df216f3888dea6ac3a80823ac0472e68f31cac43624863b80f79",metadata:{},name:"ThreadMarkUnread_threadMarkUnread_Mutation",operationKind:"mutation",text:null}}}();t.hash="183714e7d86c7cda71e8d4f29a23d53a",n["default"]=t},nG0s:function(e,n,a){"use strict";a.d(n,"a",(function(){return u}));var t=a("J4zp"),l=a.n(t),r=a("q1tI"),i=a.n(r),s=i.a.createContext(undefined);s.displayName="LiveBannerAnchorContext";var o=function(e){var n=e.children,a=i.a.useState(),t=l()(a,2),r=t[0],o=t[1];return i.a.createElement(s.Provider,{value:o},r||null,n)};o.displayName="LiveBannerAnchor";var u=function(e){var n=e.enabled,a=e.children,t=i.a.useContext(s);return i.a.useEffect((function(){return n?(null===t||void 0===t||t(a),function(){null===t||void 0===t||t(null)}):undefined})),a===undefined?null:i.a.createElement(i.a.Fragment,null,!t&&n?a:null)};n.b=o},omYZ:function(e,n,a){"use strict";a.r(n);var t=function(){var e={args:[{kind:"Literal",name:"small",value:!0}],kind:"FragmentSpread",name:"UserPhoto_user"};return{argumentDefinitions:[],kind:"Fragment",metadata:{reloadable:{operation:new(a("vfSt")["default"])(()=>a.e("query-ReloadableMessageThreadListItem_threadQuery.graphql").then(a.bind(null,"ccJa")),"ReloadableMessageThreadListItem_threadQuery.graphql")}},name:"MessageThreadListItem_thread",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"threadId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isUnreadForViewer",storageKey:null,isLive:!0},{alias:null,args:null,concreteType:"Message",kind:"LinkedField",name:"latestMessage",plural:!1,selections:[{alias:null,args:null,concreteType:"QtextDocument",kind:"LinkedField",name:"contentQtextDocument",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"legacyJson",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"author",plural:!1,selections:[e],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"time",storageKey:null}],storageKey:null,isLive:!0},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"otherUsers",plural:!0,selections:[e,{args:null,kind:"FragmentSpread",name:"UserName_user"}],storageKey:null}],type:"Thread",abstractKey:null}}();t.hash="4cf43500440d1682260fc2c5c10cc700",n["default"]=t},rxyS:function(e,n,a){"use strict";var t=a("/G9y"),l=a("vOnD"),r=Object(t.a)((function(){return a.e("common-NativeApp").then(a.bind(null,"Ure0"))}),{fallback:function(){return null},defer:!1});n.a=Object(l.withTheme)(r)},"s/A7":function(e,n,a){"use strict";a.d(n,"a",(function(){return l}));var t=Promise.resolve();"scrollBehavior"in document.documentElement.style||(t=a.e("vendor-scrollPolyfill").then(a.bind(null,"xDtx")).then((function(e){e.elementScrollIntoViewPolyfill(),e.elementScrollPolyfill()})));var l=function(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"start";e&&t.then((function(){e.scrollIntoView({behavior:"smooth",block:n})}))}},teWg:function(e,n,a){"use strict";var t;!function(e){e.permission_denied="permission_denied",e.permission_rate_limited="permission_rate_limited",e.success="success",e.suspected_spam="suspected_spam",e.unconfirmed_email="unconfirmed_email",e.unsupported_characters="unsupported_characters",e.disabled_inbox="disabled_inbox",e.daily_rate_limit_exceeded="daily_rate_limit_exceeded",e.no_access="no_access"}(t||(t={})),n.a=t},uV3B:function(e,n,a){"use strict";var t,l=a("o0o1"),r=a.n(l),i=a("yXPU"),s=a.n(i),o=a("O2TS"),u=a("VyO/"),d=a("yju1"),c={threadMarkRead:void 0!==t?t:t=a("L04J")},m=function(){var e=s()(r.a.mark((function n(e){var a,t;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(u.c)({mutation:c.threadMarkRead,variables:{threadId:e}});case 2:a=n.sent,t=a.data.threadMarkRead,Object(d.a)("broadcastAllWebViews",{messageName:"updateMessageListData",data:{threadId:e}}),Object(d.a)("broadcastAllWebViews",{messageName:"markPageAsDirty",data:{url:"/mobile_nav_sidebar"}}),Object(o.a)(t.thread.viewer);case 7:case"end":return n.stop()}}),n)})));return function(n){return e.apply(this,arguments)}}();n.a=m},ujEb:function(e,n,a){"use strict";var t,l=a("QILm"),r=a.n(l),i=a("lwsE"),s=a.n(i),o=a("W8MJ"),u=a.n(o),d=a("PJYZ"),c=a.n(d),m=a("7W2i"),g=a.n(m),f=a("a1gu"),p=a.n(f),h=a("Nsbk"),y=a.n(h),b=a("rxyS"),v=a("fJRf"),k=a("fV0L"),S=a("HC+x"),F=a("VwdU"),E=a("RA+f"),O=a("R+um"),w=a("r+vq"),T=a("VyO/"),C=a("d1zJ"),K=a("yju1"),_=a("nwxp"),L=a("q1tI"),j=a.n(L),x=a("lSNA"),M=a.n(x),R=a("pa+i"),I=a("NL3F"),D=a("jufJ"),N=a("Iu3b"),U=a("Khkn"),B=a("o8/o");!function(e){e["default"]="default",e.from_followed_tribe="from_followed_tribe",e.msg_setting_enabled="msg_setting_enabled",e.from_quora_employee="from_quora_employee",e.from_verified_user="from_verified_user"}(t||(t={}));var V,A=t;function P(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,t=y()(e);if(n){var l=y()(this).constructor;a=Reflect.construct(t,arguments,l)}else a=t.apply(this,arguments);return p()(this,a)}}var H=function(e){g()(a,e);var n=P(a);function a(){return s()(this,a),n.apply(this,arguments)}return u()(a,[{key:"openBlockUserModal",value:function(e){e({modalProps:{name:"UserBlockModal",queryVariables:{targetUid:this.props.thread.otherUsers[0].uid}}})}},{key:"render",value:function(){var e=this,n=this.props.thread,a=n.isPotentialSpamForViewer,t=n.otherUsers,l=n.eligibleToSendReason,r=n.eligibleToSendReasonTribe;return a?(Object(B.a)(l!==A.from_followed_tribe||r,"eligibleToSendReasonTribe should exist for ".concat(t[0].uid)),j.a.createElement(N.a,null,(function(a){var i,s=a.openStandaloneModal;return j.a.createElement(E.e,{p:"medium",textAlign:"center"},j.a.createElement(E.s,{fontSize:"tiny",color:"gray_light"},j.a.createElement(D.Translate,null,"This is the first time"," ",j.a.createElement(O.b,{user:t[0],format:"short"})," has messaged you on Quora."),j.a.createElement(I.a,null),j.a.createElement(D.Translate,null,j.a.createElement(D.EnumTranslate,{value:l},(i={},M()(i,A.from_quora_employee,j.a.createElement(j.a.Fragment,null,"You received this message from"," ",j.a.createElement(O.b,{user:t[0],format:"short"})," because they are an official representative of Quora.")),M()(i,A.from_verified_user,j.a.createElement(j.a.Fragment,null,"You received this message because"," ",j.a.createElement(O.b,{user:t[0],format:"short"})," is a verified user.")),M()(i,A.from_followed_tribe,j.a.createElement(j.a.Fragment,null,"You received this message because you follow"," ",j.a.createElement(U.a,{tribe:r})," ","and ",j.a.createElement(O.b,{user:t[0],format:"short"})," is an admin of this Space.")),M()(i,A.msg_setting_enabled,j.a.createElement(j.a.Fragment,null,"You received this message because your"," ",j.a.createElement(E.p,{href:"/settings/privacy"},"inbox preference")," ",'is set to "Anyone on Quora can message you".')),M()(i,"DEFAULT",""),i))),j.a.createElement(E.j,{pt:"small",alignItems:"center",justifyContent:"center"},j.a.createElement(E.f,{onClick:function(){return e.openBlockUserModal(s)},mx:"medium"},j.a.createElement(D.Translate,null," Block ")),j.a.createElement(E.e,{mx:"medium"},j.a.createElement(R.a,{reportable:n})))))}))):null}}]),a}(j.a.Component);H.fragments={thread:void 0!==V?V:V=a("WtiG")},H.displayName="FirstMessageBanner";var q=Object(T.b)(H),z=a("D5Zh"),W=a("Yc5t"),Q=a("hXLn"),G=a("uV3B"),J=a("vOnD"),Y=a("3jYl"),X=a("AFGi"),Z=a("Kh5g"),$=a("l/R4"),ee=a("FuLD"),ne=a("YVdv"),ae=a.n(ne),te=a("4Xda"),le=a("faux"),re=a("vcKx"),ie=a("/Zbp"),se=function(e){var n=e.utime;Object(B.a)(Number.isInteger(n)&&n>0,"react-messages-MessageDateTime: Expected positive integer utime value, Got: ".concat(n));var a=Object(ie.l)(n),t=Object(ie.o)(),l=Object(ie.m)(a,t);return Object(ie.t)(a,t)<24?j.a.createElement(D.FormattedDateTime,{utime:n,monthFormatLength:"short",formatType:"Compact"}):l===ie.b.FIVE_DAYS_AGO_TO_ONE_DAY_AGO?j.a.createElement(j.a.Fragment,null,Object(D.getFormattedShortWeekdayHourMinute)(a)):l===ie.b.SIX_MONTHS_AGO_TO_FIVE_DAYS_AGO||a.getFullYear()===t.getFullYear()&&l===ie.b.ONE_YEAR_AGO_TO_SIX_MONTHS_AGO?j.a.createElement(j.a.Fragment,null,Object(D.getShortMonthAndDayHourMinuteFormat)(a)):l in[ie.b.ONE_YEAR_AGO_TO_SIX_MONTHS_AGO,ie.b.FOREVER_AGO_TO_ONE_YEAR_AGO]?j.a.createElement(j.a.Fragment,null,Object(D.getFormattedYearAndShortMonthAndDayHourMinute)(a)):null};se.displayName="MessageDateTime";var oe,ue=se,de=J["default"].svg.withConfig({displayName:"Message___StyledSvg",componentId:"sc-1a606on-0"})(["transform:scaleX(",");"],(function(e){return e._css})),ce=Object(J["default"])(E.s).withConfig({displayName:"Message___StyledText",componentId:"sc-1a606on-1"})(['[data-embed-type="youtube"]{width:',";}blockquote{color:"," !important;}"],(function(e){return e._css2}),(function(e){return e._css3})),me=function(e){var n=e.theme,a=e.message,t=a.contentQtextDocument.legacyJson,l=a.author,r=a.time,i=n.fontSizes.regular*n.lineHeights.regular+2*(n.space.tiny+1),s=Object(ee.d)(l),o=Object(X.u)(t),u=JSON.parse(t),d=0===o.length&&(Object(X.l)(u)||Object(X.m)(u)||Object(X.n)(u)),c=s?Object($.e)("white",n.colors.text):Object($.e)("gray_dark",n.colors.text);return j.a.createElement(re.a.Consumer,null,(function(e){return j.a.createElement(te.b.Consumer,null,(function(a){return j.a.createElement(Y.BidiDirectionContext.Consumer,null,(function(t){return j.a.createElement(E.j,{justifyContent:s?"flex-end":"flex-start",flexShrink:0},j.a.createElement(E.j,{alignItems:"flex-end",mb:"small",mt:"tiny",maxWidth:Object(_.e)()||"dock"===e.container?"88%":"70%",flexDirection:s?"row-reverse":undefined},!s&&j.a.createElement(E.j,{flexGrow:0,flexDirection:"column"},j.a.createElement(E.s,{lineHeight:0},j.a.createElement(w.a,{user:l,size:18,position:"relative",top:-2,shouldShowBadge:!1})),j.a.createElement(E.s,{fontSize:"tiny",mt:"tiny"},"\xa0")),j.a.createElement(E.j,{ml:s?undefined:"small",mr:s?"small":undefined,flexGrow:1,justifyContent:s?"flex-end":"flex-start",flexDirection:"column",alignItems:s?"flex-end":"flex-start"},j.a.createElement(E.e,{display:"inline-block",bg:d?undefined:s?"blue":a.isDarkModeOn?"gray_dark":"gray_light",color:c,py:d?undefined:n.space.tiny+1,px:d?undefined:n.space.small+4,position:"relative",borderRadius:i/2,borderBottomLeftRadius:s?undefined:0,borderBottomRightRadius:s?0:undefined,overflow:d?"hidden":undefined},j.a.createElement(ce,{fontSize:"regular",wordBreak:"break-word",passColorToLinks:!0,underlineLinks:!0,mb:d&&!Object(X.l)(u)?"-1em":undefined,_css2:Object(_.b)()?"dock"===e.container?.88*(le.b-32)+"px":"340px":"70vw",_css3:ae()(.3,c)},j.a.createElement(Z.a,{qt:u,disableFullWidthImages:!0})),d?undefined:j.a.createElement(E.j,{position:"absolute",left:s?undefined:-6,right:s?-6:undefined,bottom:0},function(e,a,t){return j.a.createElement(de,{width:"6",height:"11",viewBox:"0 0 6 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",_css:e===t?1:-1},j.a.createElement("path",{d:"M-3.05176e-05 10.5019C-3.05176e-05 10.777 0.222986 11 0.49809 11H5.99997V0C5.99997 4.06498 4.64357 7.63316 0.640783 9.52185C0.25977 9.70162 -3.05176e-05 10.0768 -3.05176e-05 10.4981V10.4981L-2.69413e-05 10.5L-3.05176e-05 10.5019V10.5019Z",fill:e?n.colors.bg.blue:a?n.colors.bg.gray_dark:n.colors.bg.gray_light}))}(s,a.isDarkModeOn,t===Y.BidiDirection.RTL))),j.a.createElement(E.s,{fontSize:"tiny",mt:"tiny",color:"gray_light",textAlign:s?"right":"left"},j.a.createElement(ue,{utime:r})))))}))}))}))};me.displayName="Message",me.displayName="Message",me.fragments={message:void 0!==oe?oe:oe=a("8qyK")};var ge,fe=Object(J.withTheme)(Object(T.b)(me));function pe(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,t=y()(e);if(n){var l=y()(this).constructor;a=Reflect.construct(t,arguments,l)}else a=t.apply(this,arguments);return p()(this,a)}}var he=function(e){g()(a,e);var n=pe(a);function a(e){var t;return s()(this,a),(t=n.call(this,e)).lastestNewMessagesCount=void 0,t.lastestNewMessagesCount=0,t}return u()(a,[{key:"render",value:function(){var e=this,n=this.props,t=n.threadId,l=n.initialCount,r=n.scrollContainerRef;return j.a.createElement(z.a,{query:a.queries.thread,variables:{threadId:t,numMessagesKnownOnClient:l}},(function(n){var i=n.data,s=n.loading;if(n.error||s)return null;var o=i.thread;if(!o)return null;var u=o.allRecentMessages.slice().reverse();return j.a.createElement(Q.a,{fragmentOrQuery:a.queries.thread,initialData:i,variables:{threadId:t,numMessagesKnownOnClient:l}},j.a.createElement(j.a.Fragment,null,u.map((function(e,n){return j.a.createElement(j.a.Fragment,{key:e.msgId},j.a.createElement(W.a,{ratioThreshold:.5,onImpression:function(e){e&&n===u.length-1&&Object(G.a)(t)}},j.a.createElement(fe,{message:e})))})),(e.lastestNewMessagesCount!==u.length&&(setTimeout((function(){var e,n;null===(e=r.current)||void 0===e||e.scroll({top:null===(n=r.current)||void 0===n?void 0:n.scrollHeight,left:0,behavior:"smooth"})}),50),e.lastestNewMessagesCount=u.length),e.lastestNewMessagesCount>20&&e.props.refetchData(),null)))}))}}]),a}(j.a.Component);he.queries={thread:void 0!==ge?ge:ge=a("jhIG")},he.displayName="LatestMessagesLoader";var ye,be,ve=a("XNsX"),ke=a("7yJA"),Se=a("LW3J"),Fe=a("/bbo"),Ee=a("OMLc"),Oe=a("EreF"),we=a("LJFN"),Te=a("PRXj"),Ce=a("LNH1"),Ke=a("SW3P"),_e=a("teWg"),Le=a("WBlH");function je(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,t=y()(e);if(n){var l=y()(this).constructor;a=Reflect.construct(t,arguments,l)}else a=t.apply(this,arguments);return p()(this,a)}}var xe=Object(J["default"])(E.e).withConfig({displayName:"ThreadReplyComposer___StyledBox",componentId:"s975db-0"})([".editor_inner{padding:0;}"]),Me=Object(J["default"])(E.e).withConfig({displayName:"ThreadReplyComposer___StyledBox2",componentId:"s975db-1"})([".doc{min-height:0;margin:0;padding:0;line-height:1.5;",":","px;}",""],(function(e){return e._css}),(function(e){return e._css2}),(function(e){return e._css3})),Re=function(e){g()(a,e);var n=je(a);function a(e){var t;return s()(this,a),(t=n.call(this,e)).editorRef=void 0,t.buttonRef=void 0,t.fakeInputRef=void 0,t.threadReplyAddMutation=function(e){var n,l=t.props,r=l.thread,i=l.initialCount,s=null===(n=t.editorRef.current)||void 0===n?void 0:n.save();return Object(T.c)({mutation:a.mutations.threadReplyAdd,variables:{threadId:r.threadId,content:JSON.stringify(s),numMessagesKnownOnClient:i}}).then((function(n){var a,l,r=t.props.desktopReplyCallback,i=(null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.threadReplyAdd).status;if(i===_e.a.success)null===(l=t.editorRef.current)||void 0===l||l.clear(),t.setState({isSubmitting:!1}),Object(_.b)()&&r&&r();else if(Object.values(_e.a).includes(i)){var s=j.a.createElement(Le.a,{status:i});e.error(s),t.setState({isSubmitting:!1})}else e.genericError()}))["catch"]((function(){t.setState({isSubmitting:!1})}))},t.handleSubmit=function(e){t.state.canAdd&&t.editorRef.current&&!t.state.isSubmitting&&t.setState({isSubmitting:!0},(function(){var n;null===(n=t.editorRef.current)||void 0===n||n.focusEditor(),t.threadReplyAddMutation(e)}))},t.editorRef=j.a.createRef(),t.buttonRef=j.a.createRef(),t.fakeInputRef=j.a.createRef(),t.state={canAdd:!1,isSubmitting:!1,submitButtonWidth:null,hasMeaningfulContent:!1,editorLoaded:!1,isFocused:!1,imageUploadStatus:we.b.ready},t.handleEditorSetup=t.handleEditorSetup.bind(c()(t)),Object(_.g)()&&Object(K.a)("setupEditor",{hasDraft:!1}),t}return u()(a,[{key:"componentDidMount",value:function(){var e=this.props,n=e.thread,a=e.onEditorSetup,t=n.isFromModeration,l=n.otherUsers;this.measureSendButton(),!t&&l[0].viewerCanMessage||!a||this.handleEditorSetup()}},{key:"componentDidUpdate",value:function(e){!e.threadHasLoaded&&this.props.threadHasLoaded&&this.measureSendButton()}},{key:"openMobileEditorModal",value:function(e,n,a){var t=this.props.initialCount;Object(_.e)()&&e({modalProps:{name:"MessageEditorModal",extraProps:{isReply:!0,initialCount:t},queryVariables:{uid:n,threadId:a,isReply:!0},fetchPolicy:Object(_.g)()?"network-only":"store-or-network"},postDismissCallback:function(e){null!==e&&void 0!==e&&e.nextUrl&&Object(_.g)()&&(Object(K.a)("broadcastAllWebViews",{messageName:"markPageAsDirty",data:{url:"/messages"}}),window.location.reload())}})}},{key:"handleEditorSetup",value:function(){var e=this.props.onEditorSetup;this.setState({editorLoaded:!0}),null===e||void 0===e||e()}},{key:"measureSendButton",value:function(){this.buttonRef.current&&Object(_.b)()&&this.setState({submitButtonWidth:this.buttonRef.current.clientWidth})}},{key:"render",value:function(){var e=this,n=this.props,a=n.thread,t=n.onMeaningfulChange,l=n.theme,r=a.isFromModeration,i=a.network,s=a.otherUsers,o=i.helpCenterLink,u=Object(_.r)()?j.a.createElement(Y.TranslationFragment,null,"Return"):j.a.createElement(Y.TranslationFragment,null,"Enter");if(r)return j.a.createElement(E.e,{bg:"gray_ultralight",p:"medium"},j.a.createElement(E.s,{fontSize:"small",color:"gray",passColorToLinks:!0},j.a.createElement(Y.Translate,null,"You cannot reply to this message directly. Please contact us using our"," ",j.a.createElement(E.p,{href:o+"/requests/new"},"contact form"),".")));if(!s[0].viewerCanMessage)return j.a.createElement(E.e,{bg:"gray_ultralight",p:"medium"},j.a.createElement(E.s,{fontSize:"small",color:"gray"},j.a.createElement(Y.Translate,null,"You cannot send a message to"," ",j.a.createElement(O.b,{user:s[0],format:"short"})," at this time.")));if(Object(_.e)()){var d=this.props,c=d.onMobileClick,m=d.shouldFocusEditor;return j.a.createElement(Ce.b,null,(function(n){return j.a.createElement(E.e,{bg:"white",pb:"calc(".concat(Object(_.f)()?"44px":"0px"," + env(safe-area-inset-bottom))"),visibility:e.state.editorLoaded?undefined:"hidden"},j.a.createElement(E.j,{px:"medium",py:"tiny",alignItems:"center",minHeight:50},j.a.createElement("input",{ref:e.fakeInputRef,style:{width:0,height:0},type:"hidden"}),j.a.createElement(Te.a,{bg:"gray_ultralight",hasBorder:!1},j.a.createElement(xe,{maxHeight:300,overflowY:"auto",onClick:c},j.a.createElement(Oe.a,{ref:e.editorRef,placeholder:Object(Y.plaintextTranslate)("Write a message..."),editorKey:"compose-inbox-message",content:Object(X.h)(),commandsToDisable:["horizontal-rule","video"],toolbarOnMobile:!0,isToolbarBottom:!0,onMeaningfulChange:function(n){e.setState({canAdd:!n.isEmpty()}),null===t||void 0===t||t(n)},focusOnLoad:m,onEditorSetup:e.handleEditorSetup,onFocus:function(){e.setState({isFocused:!0})},onBlur:function(){e.setState({isFocused:!1})},editorPaddingReset:!0,settingOverrides:{imageRemoveButtonEnabled:!0,qtext_hyperlink_embed:!0,eagerImageUploading:!0,gifButtonEnabled:Object(Ke.a)("enable_giphy_button")},toolbarStyleOverrides:Object(_.f)()?{bg:"transparent",left:"medium",right:"medium",bottom:"env(safe-area-inset-bottom)"}:undefined,onImageUploadStatusChange:function(n){e.setState({imageUploadStatus:n})}}))),j.a.createElement(Fe.a,{size:"small",ml:"small",disabled:!e.state.canAdd||e.state.isSubmitting||e.state.imageUploadStatus===we.b.uploading,onClick:function(){var a;e.handleSubmit(n),null===(a=e.fakeInputRef.current)||void 0===a||a.focus()},icon:j.a.createElement(Ee.b,{name:"Send"})})))}))}return j.a.createElement(re.a.Consumer,null,(function(n){return j.a.createElement(Ce.b,null,(function(a){return j.a.createElement(Y.BidiDirectionContext.Consumer,null,(function(t){return j.a.createElement(E.e,{bg:"dock"===n.container?"raised":"white",p:"dock"===n.container?undefined:"small",visibility:e.state.editorLoaded?undefined:"hidden",borderTop:"dock"===n.container},j.a.createElement(E.j,{alignItems:"flex-end",position:"relative"},j.a.createElement(E.s,{p:0,borderRadius:"small",fontSize:"regular",overflow:"hidden",flex:1,position:"relative"},"dock"!==n.container&&j.a.createElement(E.a,{fullX:!0,fullY:!0,borderAll:!0,style:{pointerEvents:"none"},borderRadius:"inherit",zIndex:20,borderWidth:1}),j.a.createElement(E.q,null,j.a.createElement(Me,{maxHeight:"dock"===n.container?160:380,overflowY:"auto",_css:t===Y.BidiDirection.RTL?"padding-left":"padding-right",_css2:(e.state.submitButtonWidth||0)+l.space.medium,_css3:"dock"===n.container?"\n                              .editor_inner {\n                        padding: 0;\n                      }":""},j.a.createElement(Oe.a,{ref:e.editorRef,placeholder:Object(Y.plaintextTranslate)("Write a message..."),content:Object(X.h)(),toolbarOnWeb:"dock"!==n.container,commandsToDisable:["horizontal-rule","video"],onMeaningfulChange:function(n){e.setState({canAdd:!n.isEmpty(),hasMeaningfulContent:n.getLength()>5})},onEditorSetup:e.handleEditorSetup,settingOverrides:{shiftReturnHard:!0,gifButtonEnabled:Object(Ke.a)("enable_giphy_button")},isInline:!0,onKeyDownEvent:function(n){13!==n.which||n.shiftKey||!e.state.canAdd||e.state.isSubmitting||(e.handleSubmit(a),n.preventDefault())}})),j.a.createElement(E.a,{bottom:13,right:"medium",innerRef:e.buttonRef},j.a.createElement(Fe.a,{size:"small",text:"dock"!==n.container?j.a.createElement(E.n,{alignItems:"center"},Object(Y.plaintextTranslate)("Send"),j.a.createElement(Ee.b,{name:"Send",size:16,ml:"tiny",color:"white"})):undefined,icon:"dock"===n.container?j.a.createElement(Ee.b,{name:"Send"}):undefined,disabled:!e.state.canAdd||e.state.isSubmitting,onClick:function(){e.handleSubmit(a)},loading:e.state.isSubmitting&&"dock"!==n.container}))))),"dock"!==n.container&&j.a.createElement(E.s,{fontSize:"micro",opacity:e.state.hasMeaningfulContent?.5:0,transition:"opacity",mt:"tiny",textAlign:"right"},j.a.createElement(Se.a,null,j.a.createElement(Y.Translate,null,j.a.createElement(E.s,{medium:!0,display:"inline"},u)," ","to send"),j.a.createElement(Y.Translate,null,j.a.createElement(E.s,{medium:!0,display:"inline"},"Shift + ",u)," ","to add new line"))))}))}))}))}}]),a}(j.a.Component);Re.fragments={thread:void 0!==ye?ye:ye=a("/zLA")},Re.mutations={threadReplyAdd:void 0!==be?be:be=a("GFUM")},Re.displayName="ThreadReplyComposer";var Ie,De,Ne=Object(J.withTheme)(Object(T.b)(Re));function Ue(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,t=y()(e);if(n){var l=y()(this).constructor;a=Reflect.construct(t,arguments,l)}else a=t.apply(this,arguments);return p()(this,a)}}var Be=function(e){g()(a,e);var n=Ue(a);function a(e){var t;return s()(this,a),(t=n.call(this,e)).scrollContainerRef=void 0,t.previousBodyOverflowSetting=void 0,t.scrollOffset=void 0,t.dummyViewHeightOffset=void 0,t.scrollContainerRef=j.a.createRef(),t.previousBodyOverflowSetting=document.body.style.overflow,t.scrollOffset=Object(_.c)()?1:0,t.dummyViewHeightOffset=t.scrollOffset+(Object(_.c)()?1:0),t.handleMobileClick=t.handleMobileClick.bind(c()(t)),t.maybeScrollToBottom=t.maybeScrollToBottom.bind(c()(t)),t.sizeDummyView=t.sizeDummyView.bind(c()(t)),t.state={initialLoadComplete:!1,dummyViewHeight:0,shouldFocusEditor:!0},t}return u()(a,[{key:"scrollToBottom",value:function(e){if(this.scrollContainerRef.current){var n=this.scrollContainerRef.current,a=n.scrollHeight,t=n.clientHeight;e?this.scrollContainerRef.current.scroll({top:a-t-this.scrollOffset,left:0,behavior:"smooth"}):this.scrollContainerRef.current.scrollTop=a-t-this.scrollOffset}}},{key:"sizeDummyView",value:function(){var e=this;this.scrollContainerRef.current&&this.setState({dummyViewHeight:this.scrollContainerRef.current.clientHeight-32+this.dummyViewHeightOffset},(function(){e.scrollToBottom()}))}},{key:"refetchData",value:function(){var e,n=this;this.props.relay.refetchConnection(0,(function(){return n.setState({})}),{first:30,threadId:null===(e=this.props.thread)||void 0===e?void 0:e.threadId})}},{key:"componentDidMount",value:function(){var e=this;this.scrollToBottom(),Object(_.c)()&&setTimeout((function(){e.sizeDummyView(),window.addEventListener("resize",(function(){setTimeout((function(){e.sizeDummyView()}),200)}))}),300),Object(_.g)()&&(Object(K.a)("setPageProperties",{pullToRefresh:!1}),Object(K.a)("setPageAction",{visible:!1}))}},{key:"componentWillUnmount",value:function(){Object(_.e)()&&(document.body.style.overflow=this.previousBodyOverflowSetting)}},{key:"isAtBottom",value:function(){var e,n;if(!this.scrollContainerRef.current)return!1;var a=Object(_.c)()?1:0;return(null!==(e=this.scrollContainerRef.current.scrollTop)&&void 0!==e?e:0)+a+(null!==(n=this.scrollContainerRef.current.clientHeight)&&void 0!==n?n:0)===this.scrollContainerRef.current.scrollHeight}},{key:"handleMobileClick",value:function(){var e=this;this.isAtBottom()&&setTimeout((function(){e.scrollToBottom(!0)}),250)}},{key:"maybeScrollToBottom",value:function(){var e=!(arguments.length>0&&arguments[0]!==undefined)||arguments[0];if(this.scrollContainerRef.current){var n=this.scrollContainerRef.current,a=n.scrollTop,t=n.scrollHeight,l=n.clientHeight;a+this.scrollOffset<t-l&&this.scrollToBottom(e)}}},{key:"render",value:function(){var e=this,n=this.props,a=n.thread,t=n.relay,l=n.desktopReplyCallback,i=r()(n,["thread","relay","desktopReplyCallback"]);return j.a.createElement(re.a.Consumer,null,(function(n){var r,s;return j.a.createElement(F.a,{condition:Object(_.e)(),wrapper:function(n){return j.a.createElement(j.a.Fragment,null,Object(_.g)()&&j.a.createElement(b.a,{rightButton:j.a.createElement(E.e,null,j.a.createElement(ke.a,{thread:a,disableFocus:function(){return e.setState({shouldFocusEditor:!1})}})),variant:"regular",titleTextOnLoad:j.a.createElement(E.j,{alignItems:"center",justifyContent:"center"},j.a.createElement(w.a,{user:a.otherUsers[0],mr:"small"}),j.a.createElement(O.b,{user:a.otherUsers[0]}))}),j.a.createElement(E.i,{full:!0},n))}},j.a.createElement(E.j,Object.assign({flexDirection:"column",flex:1,minHeight:Object(_.f)()?"calc(var(--vh, 1vh) * 100 - ".concat(C.c,"px)"):undefined,height:Object(_.e)()?"100%":undefined,width:"100%",pt:Object(_.g)()?Object(v.c)():Object(_.f)()?C.c:undefined,position:"relative"},i),j.a.createElement(E.j,{flex:1,minHeight:0,bg:"dock"===n.container?"raised":"white",opacity:e.state.initialLoadComplete?1:0},j.a.createElement(S.a,{flex:1,innerRef:e.scrollContainerRef,lockBodyNative:!0,useShadows:!0,shadowOffset:Object(_.c)()?e.dummyViewHeightOffset:undefined,wrapperProps:{justifyContent:"flex-end",p:Object(_.e)()?"medium":undefined,px:Object(_.e)()?undefined:"medium",minHeight:"min-content",flex:1,display:"flex",flexDirection:"column"}},j.a.createElement(F.a,{condition:Object(_.c)(),wrapper:function(n){return j.a.createElement(E.j,{minHeight:e.state.dummyViewHeight,flexDirection:"column",justifyContent:"flex-end"},n)}},j.a.createElement(k.a,{relayObject:t,autoPaged:{enabled:!0,infiniteScrollOptions:{isReverse:!0,useWindow:!1,threshold:Object(_.e)()?10:100,getScrollParent:function(){return e.scrollContainerRef.current?e.scrollContainerRef.current:null}}},connection:null===a||void 0===a?void 0:a.messagesConnection,reverseOrder:!0},(function(e){var n=e.node;return j.a.createElement(fe,{message:n})}))),j.a.createElement(he,{threadId:a.threadId,initialCount:null!==(r=null===a||void 0===a?void 0:a.numMessages)&&void 0!==r?r:0,scrollContainerRef:e.scrollContainerRef,refetchData:function(){e.refetchData()}}),a.isPotentialSpamForViewer&&j.a.createElement(q,{thread:a}))),j.a.createElement(E.q,null,j.a.createElement(Ne,{thread:a,initialCount:null!==(s=null===a||void 0===a?void 0:a.numMessages)&&void 0!==s?s:0,onEditorSetup:function(){setTimeout((function(){e.scrollToBottom(),requestAnimationFrame((function(){e.setState({initialLoadComplete:!0}),e.sizeDummyView()}))}),500)},onMeaningfulChange:function(n){n.isEmpty()||document.activeElement!==n.node||e.maybeScrollToBottom(!0)},onMobileClick:e.handleMobileClick,shouldFocusEditor:e.state.shouldFocusEditor,desktopReplyCallback:l,threadHasLoaded:e.state.initialLoadComplete})),!e.state.initialLoadComplete&&j.a.createElement(E.a,{full:!0,zIndex:1},Object(ve.a)("dock"===n.container))))}))}}]),a}(j.a.Component);Be.fragments={thread:void 0!==Ie?Ie:Ie=a("bfHU")},Be.getPagedListQuery=function(){return void 0!==De?De:De=a("PpKx")},Be.connectionConfig={query:Be.getPagedListQuery(),direction:"forward",getConnectionFromProps:function(e){var n;return null===(n=e.thread)||void 0===n?void 0:n.messagesConnection},getVariables:function(e,n){var a;return{first:10,after:n.cursor,threadId:null===(a=e.thread)||void 0===a?void 0:a.threadId}}},Be.displayName="MessagesThread";n.a=Object(T.d)(Be)},ut3L:function(e,n,a){"use strict";a.r(n);var t=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"threadId"}],n=[{kind:"Variable",name:"threadId",variableName:"threadId"}],a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},l=[t,a,{alias:null,args:null,kind:"ScalarField",name:"reverseOrder",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"givenName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"familyName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scriptCode",storageKey:null}],r=[a,t,{alias:null,args:null,kind:"ScalarField",name:"uid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isAnon",storageKey:null},{alias:"smallProfileImageUrl",args:[{kind:"Literal",name:"size",value:"small"}],kind:"ScalarField",name:"profileImageUrl",storageKey:'profileImageUrl(size:"small")'},{alias:null,args:null,kind:"ScalarField",name:"profileImageUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isVerified",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"businessStatus",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"profileUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"useTranslatedName",storageKey:null},{alias:null,args:null,concreteType:"UserName",kind:"LinkedField",name:"names",plural:!0,selections:l,storageKey:null},{alias:null,args:null,concreteType:"UserName",kind:"LinkedField",name:"adminNames",plural:!0,selections:l,storageKey:null},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"ConsumerBundleSubscriptions",value:"true"},condition:"onFeature",selections:[{alias:null,args:null,kind:"ScalarField",name:"consumerBundleActive",storageKey:null}]},{kind:"Condition",passingValue:!0,isCustom:!0,customValue:{name:"annotate_with_ids",value:"true"},condition:"onGate",selections:[{alias:null,args:null,kind:"ScalarField",name:"debugInfo",storageKey:null}]}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"MessageThreadListItemQuery",selections:[{alias:null,args:n,concreteType:"Thread",kind:"LinkedField",name:"thread",plural:!1,selections:[a,t,{args:null,kind:"FragmentSpread",name:"MessageThreadListItem_thread"}],storageKey:null}],type:"QueryRoot",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"MessageThreadListItemQuery",selections:[{alias:null,args:n,concreteType:"Thread",kind:"LinkedField",name:"thread",plural:!1,selections:[a,t,{alias:null,args:null,kind:"ScalarField",name:"threadId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isUnreadForViewer",storageKey:null},{alias:null,args:null,concreteType:"Message",kind:"LinkedField",name:"latestMessage",plural:!1,selections:[{alias:null,args:null,concreteType:"QtextDocument",kind:"LinkedField",name:"contentQtextDocument",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"legacyJson",storageKey:null},a],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"author",plural:!1,selections:r,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"time",storageKey:null},a],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"otherUsers",plural:!0,selections:r,storageKey:null}],storageKey:null}]},params:{id:"fc00cf2f3f6007d34d036b697784f3b795a23ca07241b38db5aeba1cd269d26a",metadata:{},name:"MessageThreadListItemQuery",operationKind:"query",text:null}}}();t.hash="77c6404cd41c0cf2696ffaab2f48fb7f",n["default"]=t},vcKx:function(e,n,a){"use strict";var t=a("q1tI"),l=a.n(t).a.createContext({container:null});l.displayName="MessageContainerContext",n.a=l}}]);