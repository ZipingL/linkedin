(window.ansFrontendRelayWebpackJsonpFunction=window.ansFrontendRelayWebpackJsonpFunction||[]).push([["component-NUXRenderer"],{SpgY:function(e,t,n){"use strict";n.r(t),n.d(t,"nuxTransition",(function(){return L}));var a=n("RIqP"),r=n.n(a),l=n("lwsE"),i=n.n(l),o=n("W8MJ"),u=n.n(o),s=n("7W2i"),c=n.n(s),d=n("a1gu"),p=n.n(d),f=n("Nsbk"),m=n.n(f),y=n("eP4p"),g=n("EFAP"),h=n("jQ0q"),b=n("SKAY"),v=n("VyO/"),k=n("AaDK"),x=n("nwxp"),w=n("GLuq"),S=n("mF64"),R=n("UyMh"),F=n("q1tI"),_=n.n(F),E=n("RqIh"),I=n("jufJ"),j=n("noLW"),O=n("6lcX"),M=n("RA+f"),C=n("d1zJ");function K(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var N,T=function(e){c()(n,e);var t=K(n);function n(e){var a;return i()(this,n),(a=t.call(this,e)).state={currentStepIdx:0},a}return u()(n,[{key:"incrementStepIdx",value:function(){this.setState((function(e){return Object.assign({},e,{currentStepIdx:e.currentStepIdx+1})}))}},{key:"render",value:function(){var e=this.props.totalSteps,t=this.state.currentStepIdx,n="".concat((this.state.currentStepIdx+1)/e*100,"%");return t<e&&_.a.createElement(M.i,{top:0,fullX:!0,zIndex:"modal_desktop",bg:"white",borderBottom:!0,boxShadow:"medium"},_.a.createElement(M.j,{width:O.d,mx:"auto",alignItems:"center",justifyContent:"space-between"},_.a.createElement(j.a,{color:"red",height:C.b}),_.a.createElement(M.n,{alignItems:"center"},_.a.createElement(M.e,null,_.a.createElement(M.s,{medium:!0},_.a.createElement(I.Translate,null,"Start"))),_.a.createElement(M.e,{px:"medium"},_.a.createElement(M.e,{bg:"gray",borderRadius:"pill",height:10,width:600},_.a.createElement(M.e,{bg:"blue",borderRadius:"pill",height:"100%",width:n,transition:"width",transitionDuration:"400ms"}))),_.a.createElement(M.e,null,_.a.createElement(M.s,{medium:!0},_.a.createElement(I.Translate,null,"Finish")))),_.a.createElement(M.e,{opacity:0},_.a.createElement(j.a,{color:"red",height:C.b}))))}}]),n}(F.Component),q=n("V1RE");function A(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var L=function(e){var t,n=e.flowData,a=e.showNextModal,r=e.dismissModalFlow;Object(k["default"])("nux_step_completion",{step_name:n.stepNames[n.stepIdx]}),n.stepIdx+=1,null!==(t=n.headerRef)&&void 0!==t&&t.current&&n.headerRef.current.incrementStepIdx(),n.stepIdx>=n.stepNames.length?r():(n.isLastStep=n.stepIdx>=n.numInteractiveSteps-1,a({modalProps:{name:q.f[n.stepNames[n.stepIdx]],queryVariables:{stepType:n.stepNames[n.stepIdx]},desktopWidth:q.b,desktopHeight:q.a,desktopOverlayStyle:{backgroundColor:"white"}},replaceActiveModal:!0}))},D=function(e){c()(n,e);var t=A(n);function n(e){var a;return i()(this,n),(a=t.call(this,e)).headerRef=void 0,a.shouldIncludeSpinnerStep=function(e){return b.isStorybook||b.isNpmRunStart||[E.a.answer,E.a.home_feed_main].includes(e)},a.headerRef=_.a.createRef(),a}return u()(n,[{key:"render",value:function(){var e=this;if(!Object(q.e)(this.props.nux))return null;var t=this.props.nux;if(!t)return null;var a=t.steps.length,l=t.id,i=t.__typename;return _.a.createElement(g.d.Consumer,null,(function(o){return _.a.createElement(g.c.Consumer,null,(function(u){var s=!!o&&e.shouldIncludeSpinnerStep(o);return _.a.createElement(v.a,{mutation:n.mutations.nuxMarkComplete,variables:{},onCompleted:function(){if(Object(x.g)())Object(y.h)();else{var e=Object(S.f)(),t=e.wui,n=e.ref;if(t&&n&&o===E.a.answer)return void Object(R.c)("/?pua_signup_answer_page=".concat(u),"replace");if(o===E.a.answer&&Object(R.c)("/?signup_answer_page=".concat(u),"replace"),o===E.a.question_main){var a=Object(w.e)("/");a.query.from_signup=1,Object(R.c)(a)}}},optimisticResponse:{nuxMarkComplete:{nux:{id:l,__typename:i,steps:[]},viewer:{showGoToFeedGrowl:!0}}}},(function(n){return _.a.createElement(_.a.Fragment,null,Object(x.b)()&&_.a.createElement(T,{totalSteps:a+1,ref:e.headerRef}),_.a.createElement(h.a,{shouldPrefetch:Object(x.g)(),modalFlowProps:{initialModalProps:(l=t.steps[0].name,{name:q.f[l],queryVariables:{stepType:l},desktopWidth:q.b,desktopHeight:q.a,desktopOverlayStyle:{backgroundColor:"white"}}),initialFlowData:{stepIdx:0,numInteractiveSteps:a,stepNames:[].concat(r()(t.steps.map((function(e){return e.name}))),r()(s?["spinner"]:[])),isLastStep:a<2,headerRef:e.headerRef,pageType:o},containerProps:{legacy:!0,easyDismissEnabled:!1},dismissableBack:!1,transitionName:"NUXTransition",postDismissCallback:n}},(function(e){var t=e.openModalFlow;return _.a.createElement(q.c,{openModalFlow:t})})));var l}))}))}))}}]),n}(_.a.Component);D.fragments={nux:void 0!==N?N:N=n("v5H7")},D.mutations={nuxMarkComplete:q.d},D.displayName="NUXRenderer";t["default"]=Object(v.b)(D)},V1RE:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return f})),n.d(t,"f",(function(){return m})),n.d(t,"e",(function(){return h})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return v}));var a,r=n("J4zp"),l=n.n(r),i=n("SKAY"),o=n("AaDK"),u=n("qy3/"),s=n("q1tI");function c(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){o=!0,l=e},f:function(){try{i||null==n["return"]||n["return"]()}finally{if(o)throw l}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var p="760px",f="550px",m={follow_interests:"FollowInterestsStep",language:"LanguageStep",download_app:"DownloadAppStep",spinner:"SpinnerStep"},y=[["index","index"],["question","q"],["question","answer"],["topic","t"]],g=function(){return!!function(){var e,t=!1,n=c(y);try{for(n.s();!(e=n.n()).done;){var a=e.value,r=l()(a,2),o=r[0],u=r[1];o===Object(i.getSetting)("controller")&&u===Object(i.getSetting)("action")&&(t=!0)}}catch(s){n.e(s)}finally{n.f()}return t}()&&!Object(i.getSetting)("getParams").digest_story},h=function(e){return Object(u.b)(null===e||void 0===e?void 0:e.steps)&&g()},b=function(e){var t=e.openModalFlow;return Object(s.useEffect)((function(){Object(o["default"])("nux_start",{}),t()}),[t]),null},v=void 0!==a?a:a=n("jX9V")},jX9V:function(e,t,n){"use strict";n.r(t);var a=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},n={alias:null,args:null,concreteType:"NUX",kind:"LinkedField",name:"nux",plural:!1,selections:[e,t,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"steps",plural:!0,selections:[e,t],storageKey:null}],storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"showGoToFeedGrowl",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"nuxUtils_nuxMarkComplete_Mutation",selections:[{alias:null,args:null,concreteType:"NuxMarkComplete",kind:"LinkedField",name:"nuxMarkComplete",plural:!1,selections:[n,{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[a],storageKey:null}],storageKey:null}],type:"MutationRoot",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"nuxUtils_nuxMarkComplete_Mutation",selections:[{alias:null,args:null,concreteType:"NuxMarkComplete",kind:"LinkedField",name:"nuxMarkComplete",plural:!1,selections:[n,{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[a,e],storageKey:null}],storageKey:null}]},params:{id:"a6d7246182f57758f28d7429944b38acadc5d748dd77a0e1ff1864508308a3fb",metadata:{},name:"nuxUtils_nuxMarkComplete_Mutation",operationKind:"mutation",text:null}}}();a.hash="224397605c2cc50bffba1864a365598f",t["default"]=a},v5H7:function(e,t,n){"use strict";n.r(t);var a=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"NUXRenderer_nux",selections:[e,t,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"steps",plural:!0,selections:[e,t,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],type:"NUX",abstractKey:null}}();a.hash="8c29d0d10ed3a46bd9362f6188158a5b",t["default"]=a}}]);